ABSTRACT: 
The half-open real unit interval (0,1] is closed under the ordinary multiplication and its residuum. The corresponding infinite-valued propositional logic has as its equivalent algebraic semantics the equational class of cancellative hoops. Fixing a strong unit in a cancellative hoop -equivalently, in the enveloping lattice-ordered abelian group- amounts to fixing a gauge scale for falsity. In this paper we show that any strong unit in a finitely presented cancellative hoop H induces naturally (i.e., in a representation-independent way) an automorphism-invariant positive normalized linear functional on H. Since H is representable as a uniformly dense set of continuous functions on its maximal spectrum, such functionals -in this context usually called states- amount to automorphism-invariant finite Borel measures on the spectrum. Different choices for the unit may be algebraically unrelated (e.g., they may lie in different orbits under the automorphism group of H), but our second main result shows that the corresponding measures are always absolutely continuous w.r.t. each other, and provides an explicit expression for the reciprocal density.Comment: 24 pages, 1 figure. Revised version according to the referee's suggestions. Examples added, proof of Lemma 2.6 simplified, Section 7 expanded. To appear in the Journal of Symbolic Logi. 
 
PREDICTION: 
we consider the equational theory of states , which arise in the modelling of systems of interacting particles .<n> we assume that the particles are interacting with each other .<n> we deal with the case where the interactions are given by a system of differential equations .<n> the state is called  hoop '' if it is the union of two subsystems , one of which is a composite system .<n> the interaction between the subsystems is given by a system of differential equations .<n> the state is called  hoop '' if it is the union of two subsystems , one of which is a composite system .<n> the state is called  hoop '' if it is the union of two subsystems , one of which is a composite system . in this paper<n> we consider the equational theory of states , which arise in the modelling of systems of interacting particles .<n> we assume that the particles are interacting with each other .<n> the interaction is given by a system of differential equations .<n> the state is called  hoop '' if it is the union of two subsystems , one of which is a composite system .<n> the interaction is given by a system of differential equations .<n> the state is called  hoop 
 
FULL TEXT: 
 â€”in this context usually called statesâ€” amount to automorphism-invariant finite Borel measures on the spectrum. Dif- ferent choices for the unit may be algebraically unrelated (e.g., they may lie in different orbits under the automorphism group of H), but our second main result shows that the corresponding measures are always absolutely continuous w.r.t. each other, and provides an explicit expression for the reciprocal density. 1. Introduction A cancellative hoop is an algebra (H,+, Â·âˆ’, 0) satisfying commutative monoid identities for +, 0, x Â·âˆ’ x = 0, (x Â·âˆ’ y) Â·âˆ’ z = x Â·âˆ’ (y + z), x+ (y Â·âˆ’ x) = y + (x Â·âˆ’ y), (x+ y) Â·âˆ’ y = x. The above identities have manifold appearances, and can be seen from various points of view. First of all, they characterize the equational theory of truncated addition. In- deed, the class CH of cancellative hoops coincides with the equational class gen- erated by (Râ‰¥0,+, Â·âˆ’, 0), where x Â·âˆ’ y = max{0, x âˆ’ y}. Therefore, they suffice to capture all identities valid in the positive reals. Also, cancellative hoops are pre- cisely the positive cones of lattice-ordered abelian groups (`-groups for short), the latter being the abelian groups (G,+,âˆ’, 0) endowed with a lattice order (G,âˆ§,âˆ¨) on which the group translations act as order automorphisms. Actually, more is true: the assignment G 7â†’ Gâ‰¥0 = {g âˆˆ G : g â‰¥ 0} is functorial, and provides a cat- egorical equivalence between the class of all `-groups (which is generated by R, and is equational in the language +,âˆ’, 0,âˆ§,âˆ¨), and CH [6, Theorem 1.17]. Note that the lattice operations are definable in the hoop language by xâˆ¨y = x+(y Â·âˆ’ x) and Key words and phrases. cancellative hoop, lattice-ordered abelian group, MV-algebra, strong unit, uniform distribution, Cesa`ro mean. 2010 Math. Subj. Class.: 03G25; 06F20; 11K06. 1 ar X iv :1 20 3. 25 13 v3 [ ma th. LO ] 10 Ja n 2 01 3 2 G. PANTI, D. RAVOTTI x âˆ§ y = x Â·âˆ’ (x Â·âˆ’ y). The prototypical examples of `-groups â€”and hence, taking positive cones, of cancellative hoopsâ€” are the sublattice-subgroups of the `-group C(X) of all real-valued continuous functions on a compact Hausdorff space X, with componentwise operations. Reversing the order and changing notation provides a second point of view, of a logical nature. Let exp(r) = cr, for some arbitrarily fixed real number 0 < c < 1. Then exp is an order-reversing isomorphism between (Râ‰¥0,+, Â·âˆ’, 0) and the residuated lattice ((0, 1], Â·,â†’, 1); here (0, 1] is the half-open real unit interval endowed with the usual order and multiplication Â·, and â†’ is the residuum of Â·, characterized by the adjunction z â‰¤ x â†’ y iff z Â· x â‰¤ y. An easy checking gives x â†’ y = min{1, y/x}, and the cancellative hoop axioms translate to the familiar logical identities commutative monoid identities for Â·, 1, xâ†’ x = 1, z â†’ (y â†’ x) = (z Â· y)â†’ x, x Â· (xâ†’ y) = y Â· (y â†’ x), y â†’ (x Â· y) = x. The many-valued logical system defined by the above identities has the interval (0, 1] as its set of truth-values, and is called the logic of cancellative hoops [11], [26], [21, Â§6.4]; it is what remains of Hajekâ€™s product logic [15] once the falsum is removed. A third facet of the matter arises from the observation that the addition opera- tion + and its residuum Â·âˆ’ capture the process of production and consumption of resources in a Petri net under the firing of a transition. In the classical setting the resources at each place of a Petri net are marked by an element of Zâ‰¥0, and this setting is readily generalizable to arbitrary cancellative hoops which are called, in this setting, Petri algebras. See [1] and references therein. An element of the cancellative hoop H whose multiples eventually dominate any element of H is traditionally called a strong unit or, sometimes, an order unit. Since we are not dealing with the related notion of weak unit, we will simply say unit. So, explicitly, a unit is an element u âˆˆ H such that for every h âˆˆ H there exists a positive integer k with h â‰¤ ku. An element u of a hoop of the form C(X)â‰¥0 is a unit iff u(x) 6= 0 for every x âˆˆ X (remember that X is compact Hausdorff by definition). Units arise in all contexts cited above: they are archimedean elements in the `-group enveloping H, gauge scales for falsity in falsum-free product logic, and universal bounds in bounded Petri nets. Upon defining x âŠ• y = u âˆ§ (x + y), Â¬x = uâˆ’x, xy = Â¬(Â¬xâŠ•Â¬y), the interval Î“(H,u) := {h âˆˆ H : h â‰¤ u} is an MV- algebra, namely the equivalent algebraic semantics of Lukasiewicz infinite-valued logic. In the following we assume some familiarity with `-groups, cancellative hoops and MV-algebras, referring to [5], [6], [8], [11], [24] for all unproved claims. Let u be a unit in the cancellative hoop H. A state on the pair (H,u) is a monoid homomorphism m : H â†’ Râ‰¥0 such that m(u) = 1; states on (H,u) corre- spond in a 1â€“1 canonical way to states on the unital `-group enveloping H and to states on the MV-algebra Î“(H,u) [22, Theorem 2.4]. We are naturally interested in automorphism-invariant states, namely those states m such that m â—¦ Ïƒ = m for every automorphism Ïƒ of H that fixes u. This is a quite natural requirement, since MEASURES INDUCED BY UNITS 3 its lacking makes impossible to assign an â€œaverage truth valueâ€ to propositions in infinite-valued Lukasiewicz logic in a representation-independent way. The first re- sult in this context is [22, Theorem 3.4], saying that integration w.r.t. the Lebesgue measure is an automorphism-invariant state on the free MV-algebra over finitely many generators Freen(MV); this has been generalized in [23, Theorem 4.1] to all finitely presented MV-algebras. As a matter of fact, integration w.r.t. the Lebesgue measure is the only (modulo certain natural restrictions) automorphism-invariant state on Freen(MV); this has been proved in [27] using ergodic theory, and in [20] using algebraic means. The set Mu of all states on (H,u) is compact convex in RH ; let Eu âŠ† Mu be the set of extremal states. Then m âˆˆ Eu iff m is a hoop homomorphism [14, Theorem 12.18]. As in [14, p. 70], we say that e âˆˆ Eu is discrete if e[H] is a discrete subhoop of Râ‰¥0: this happens iff e[H] = bâˆ’1 Â· Zâ‰¥0 for a uniquely defined integer b â‰¥ 1, which we call the denominator of e. Let H be any finitely presented cancellative hoop, and let u âˆˆ H be any unit. Our first main result, Theorem 4.2, says that for every enumeration of the discrete extremal states of (H,u) according to nondecreasing denominators, the corresponding Cesa`ro mean converges, does not depend on the enumeration, and determines an automorphism-invariant state mu on (H,u). The definition of mu is thus intrinsic, because it is not based on any given representation of H. Of course the proof of the above properties is heavily based on the representation theory of `-groups (as well as on tools new in this circle of ideas, namely uniform distribution theory and the Ehrhart theory). Let now a representation of H as a separating subhoop of some C(X)â‰¥0 be given. Contrary to standard usage, we do not assume that the elements of H are represented by piecewise-linear functions on X, nor that u is represented by the constant function 1l (note however that the representing space X is determined by H up to homeomorphism; see Â§2). By Lemma 2.1(iv) the state mu defined by Theorem 4.2 corresponds to a unique Borel finite measure Âµu on X. Let now v be any other unit of H, and let mv, Âµv be the corresponding state and measure. In contrast with the vector lattice case [4, Lemma 4.2], the automorphism group of H does not act transitively on the set of units, so u and v may be algebraically unrelated. Nevertheless, our second main result, Theorem 6.1, says that Âµu and Âµv are absolutely continuous w.r.t. each other, and computes explicitly the reciprocal density in terms of u, v, and the dimension of X â€”again, a number intrinsically determined by H. We thank the referee for his attentive reading and detailed comments on a pre- vious version of this paper. 2. Representations and relative volume We fix notation by recalling a few basic definitions and facts; since the categorical equivalence between `-groups and cancellative hoops preserves all the usual notions of homomorphism, subalgebra, dual space, . . ., we shall use freely well-known facts from the theory of `-groups. The maximal spectrum of the cancellative hoop H is the space MaxSpecH whose elements are the maximal ideals of H (i.e., the kernels of the hoop homomorphisms from H to Râ‰¥0), endowed with the hull-kernel topology, namely the topology gener- ated by all sets of the form {m âˆˆ MaxSpecH : h /âˆˆ m}, for h varying in H. All hoops we consider are representable in the following restricted sense: H is representable 4 G. PANTI, D. RAVOTTI if it is nonzero and there exists an injective hoop homomorphism Ï : H â†’ C(X)â‰¥0, for some compact Hausdorff space X, such that for every x 6= y âˆˆ X there exists h âˆˆ H with (Ïh)(x) = 0 and (Ïh)(y) 6= 0. Lemma 2.1. Let H be a cancellative hoop. Then: (i) H is representable iff it contains a unit and â‹‚ MaxSpecH = 0. (ii) Let Ï : H â†’ C(X)â‰¥0 be a representation and u âˆˆ H a unit. Then the three spaces Eu, MaxSpecH, X are canonically homeomorphic via the mappings X 3 x 7â†’ mx = {h âˆˆ H : (Ïh)(x) = 0} âˆˆ MaxSpecH; MaxSpecH 3 m 7â†’ (the unique hoop homomorphism e : H â†’ Râ‰¥0 whose kernel is m and such that e(u) = 1 ) âˆˆ Eu; X 3 x 7â†’ (h 7â†’ (Ïh)(x)/(Ïu)(x)) âˆˆ Eu. (iii) Given two representations Ïi : H â†’ C(Xi)â‰¥0, for i = 1, 2, let R : X1 â†’ X2 be the homeomorphism obtained by composing the maps in (ii) (this amounts to saying that Rx is the unique point in X2 such that, for every h âˆˆ H, (Ï1h)(x) = 0 iff (Ï2h)(Rx) = 0). Then there exists a unit f âˆˆ C(X1)â‰¥0 such that, for every h âˆˆ H, Ï1h = f Â· ( (Ï2h) â—¦R ) . Moreover, R is the only homeomorphism : X1 â†’ X2 satisfying this prop- erty. (iv) Let Ï, u be as in (ii). Then Ï induces a canonical bijection between the set of states on (H,u) and the set of regular Borel measures on X (since X is compact, such measures are necessarily finite). If H is countable, all Borel measures on X are regular. Proof. (i) and (ii) are well known [33]. (iii) Let x âˆˆ X1; then {(Ï1h)(x) : h âˆˆ H} and {(Ï2h)(Rx) : h âˆˆ H} are isomorphic nonzero subhoops of Râ‰¥0 under the natural isomorphism (since they both are isomorphic to H/mx). By [17, Proposition II.2.2], any isomorphism of subhoops of Râ‰¥0 is given by multiplication by a positive real number. Therefore there exists f(x) > 0 such that (Ï1h)(x) = f(x) Â· ( (Ï2h)(Rx) ) , for every h âˆˆ H. The function x 7â†’ f(x) is continuous because it is the quotient f = (Ï1u)/ ( (Ï2u) â—¦ R ) of two continuous never 0 functions (u being any unit of H). Since f is never 0 and X1 is compact, f is a unit of C(X1)â‰¥0; in general f does not belong to Ï1H. Let T : X1 â†’ X2 be a homeomorphism such that, for some unit g of C(X1)â‰¥0 and every h âˆˆ H, we have Ï1h = g Â· ( (Ï2h) â—¦ T ) . Let x âˆˆ X1; since (Ï1h)(x) = 0 iff (Ï2h)(Tx) = 0 for every h âˆˆ H, we have Tx = Rx. (iv) Every state m on (H,u) obviously corresponds to the state m â—¦ Ïâˆ’1 on (ÏH, Ïu). As proved in [27, Proposition 1.1] using the lattice version of the Stone- Weierstrass theorem, m â—¦ Ïâˆ’1 can be uniquely extended to a state on all of C(X). By the Riesz representation theorem there exists a 1â€“1 correspondence between states on C(X) and Borel regular measures on X; denoting with Âµ the measure corresponding to m â—¦ Ïâˆ’1 we thus have m(h) = (m â—¦ Ïâˆ’1)(Ïh) = âˆ« X ÏhdÂµ, MEASURES INDUCED BY UNITS 5 for every h âˆˆ H. If H is countable then X is second countable, whence metrizable and every open set is Ïƒ-compact; hence every Borel measure on X is regular [30, Theorem 2,18]. See [18], [27], [9], [13], [24, Chapter 10] for details and further developments.  A McNaughton function over the n-dimensional cube [0, 1]n is a continuous func- tion f : [0, 1]n â†’ Râ‰¥0 for which the following holds: there exist finitely many affine polynomials f1, . . . , fk, each fi of the form fi = a 1 ix1 +a 2 ix2 + Â· Â· Â·+ani xn+an+1i , with a1i , . . . , an+1i integers, such that, for each w âˆˆ [0, 1]n, there exists i âˆˆ {1, . . . , k} with f(w) = fi(w). The free cancellative hoop over n + 1 generators Freen+1(CH) is then the sub- hoop M([0, 1]n)â‰¥0 of C([0, 1]n)â‰¥0 whose elements are all the McNaughton func- tions, the free generators being x1, . . . , xn, 1l âˆ’ (x1 âˆ¨ Â· Â· Â· âˆ¨ xn); here xi is the i-th projection [26, Theorem 1]. Also, the free MV-algebra over n generators is Freen(MV) = Î“(Freen+1(CH), 1l), the free generators being x1, . . . , xn. Extending the above notation, we will write M(W )â‰¥0 for the hoop of restrictions of Mc- Naughton functions to the closed subset W of [0, 1]n. We write points of [0, 1]n as n-tuples w = (Î±1, . . . , Î±n), and points of Rn+1 as column vectors w = (Î±1 Â· Â· Â·Î±n+1)tr. We also use boldface to denote functions on subsets of Rn+1; in particular x1, . . . ,xn+1 are the coordinate projections. We often embed [0, 1]n in the hyperplane {xn+1 = 1} of Rn+1 in the obvious way. The point w is rational if it belongs to Qn+1, and is integer if it belongs to Zn+1. In the latter case, w is primitive if the gcd of its coordinates is 1. The denominator of w âˆˆ Qn+1 is the least integer b â‰¥ 1 such that bw âˆˆ Zn+1. The cone over W âŠ† [0, 1]n âŠ‚ Rn+1 is Cone(W ) = {Î±w : Î± âˆˆ R>0 and w âˆˆ W}. Any f âˆˆM(W )â‰¥0 gives rise to its homogeneous correspondent f : Cone(W )â†’ Râ‰¥0 via f(w) = xn+1(w) Â·f ( w/xn+1(w) ) , which is a positively homogeneous piecewise- linear map, all of whose linear pieces have integer coefficients. In syntactical terms, f is obtained by writing f as a term (either in the `-group language +,âˆ’, 0,âˆ¨,âˆ§ or in the hoop language) built up from the projections x1, . . . , xn and the constant function 1l, and replacing each xi with xi, and 1l with xn+1. Definition 2.2. A McNaughton representation of the cancellative hoop H is a representation Ï : H â†’ C(W )â‰¥0 such that W is a closed subset of some cube [0, 1]n and the range of Ï is M(W )â‰¥0. We then write h : Cone(W )â†’ Râ‰¥0 for the homogeneous correspondent of Ïh. Given a unit u of H, we set W1 = Cone(W ) âˆ© {u = 1}. The map h 7â†’ h  W1 is a representation Ï1 : H â†’ C(W1)â‰¥0, and the projection w 7â†’ w/u(w) from W to W1 is the homeomorphism R of Lemma 2.1(iii). Lemma 2.3. Let H,u, Ï1 be as in Definition 2.2. Then the homeomorphism F : Eu â†’W1 of Lemma 2.1(ii) amounts to F (e) = w iff e(h) = h(w) for every h âˆˆ H. Moreover, given any integer b â‰¥ 1, F induces a bijection between: (a) the discrete states e âˆˆ Eu of denominator b; (b) the rational points w âˆˆW1 of denominator b; (c) the primitive points in Cone(W ) âˆ© {u = b}. In particular, each of the above three sets is finite. Proof. Since u  W1 = 1l, the statement about F is obvious. Let h1, . . . , hn, hn+1 be the Ï-counterimages of the generators x1  W , . . ., xn  W , 1l  W of M(W )â‰¥0. Then H is generated by h1, . . . , hn+1, and hi = xi, for i = 1, . . . , n + 1. Let now 6 G. PANTI, D. RAVOTTI F (e) = w = (Î±1 Â· Â· Â·Î±n+1)tr âˆˆ W1. Then e(hi) = Î±i, and e[H] is the intersection of Râ‰¥0 with the subgroup of R generated by Î±1, . . . , Î±n+1. Therefore e is discrete of denominator b iff the subgroup of R generated by Î±1, . . . , Î±n+1 is bâˆ’1 Â· Z iff bÎ±1, . . . , bÎ±n+1 âˆˆ Z and the group they generate is all of Z iff bÎ±1, . . . , bÎ±n+1 are relatively prime integers iff w is a rational point of denominator b. This establishes the bijection between (a) and (b). To every rational point w âˆˆW1 there corresponds the unique primitive point den(w)w âˆˆ Cone(W ), and u(den(w)w) = den(w) Â· u(w) = den(w), so (b) and (c) are in bijection.  We need some further tools from piecewise-linear topology: see [29], [34], [12] for full details. A rational polytope S is the convex hull of finitely many points of Qn+1; its (affine) dimension is the maximum integer d = dim(S) such that S contains d+ 1 affinely independent points. The affine subspace A = aff(S) of Rn+1 spanned by S is then d-dimensional and defined over Q (i.e., it is the 0-set of finitely many affine polynomials with rational coefficients). A face of S is S itself or the intersection of S with an hyperplane pi such that S is entirely contained in one of the two closed halfspaces determined by pi; the empty set is a face, and every face different from S is proper. The index of S is the least integer b â‰¥ 1 such that bAâˆ©Zn+1 6= âˆ… [3, p. 518], and the relative interior of S, relint(S), is the topological interior of S in A or, equivalently, the set of all points of S which do not lie in a proper face. Definition 2.4. Let S,A, b be as above. If d = 0, then S = A = {w} for some w âˆˆ Qn+1, and we define Î½A(S) = 1. Assume d > 0. Then there exists a (nonunique) affine isomorphism Ïˆ : bA â†’ Rd that maps bA âˆ© Zn+1 bijectively to Zd. Let us abuse language by writing b : Aâ†’ bA for the map w 7â†’ bw. We define the relative volume form â„¦A on A as â„¦A = 1 bd+1 Â· (the pull-back via Ïˆ â—¦ b of the standard volume form dxÂ¯ = dx1 âˆ§ Â· Â· Â· âˆ§ dxd on Rd ) . This amounts to saying that, for every continuous function f : Aâ†’ R with compact support (more generally, every Riemann-integrable function), we haveâˆ« A f â„¦A = 1 bd+1 âˆ« Rd f â—¦ bâˆ’1 â—¦ Ïˆâˆ’1 dxÂ¯. (1) Up to sign â„¦A does not depend on the choice of Ïˆ, and we always assume that Ïˆ has been chosen so that âˆ« A f â„¦A â‰¥ 0 for f â‰¥ 0. The measure Î½A induced by â„¦A on A is then the d-dimensional Lebesgue measure, appropriately normalized. Given a Riemann-measurable subset E of A, the identity (1) yields the explicit formula Î½A(E) = âˆ« A 1lE â„¦A = 1 bd+1 âˆ« Rd 1lE â—¦ bâˆ’1 â—¦ Ïˆâˆ’1 dxÂ¯ = 1 bd+1 âˆ« Rd 1lÏˆ[bE] dxÂ¯ = 1 bd+1 Î»d ( Ïˆ[bE] ) , (2) MEASURES INDUCED BY UNITS 7 where Î»d is the usual d-dimensional Lebesgue measure on Rd. Example 2.5. For the readerâ€™s convenience we give here a direct construction for the map Ïˆ of Definition 2.4, and provide an example. Adopting the above notation, assume that w âˆˆ bA âˆ© Zn+1. Then bA âˆ’ w is a d-dimensional linear subspace of Rn+1, and is defined over Q (equivalently, over Z). It follows that there exists a Z-basis m1, . . . ,md,md+1, . . . ,mn+1 of Zn+1 whose first d elements constitute a Z-basis for (bAâˆ’w)âˆ©Zn+1. Let e1, . . . , ed denote the standard basis of Rd and let Ï• : Rn+1 â†’ Rd denote the unique linear map sending mi to ei if i â‰¤ d, and to 0 otherwise. Then the map Ïˆ(v) = Ï•(vâˆ’w) is an affine isomorphism as described in Definition 2.4. Any other isomorphism Ïˆâ€² : bA â†’ Rd sharing the same properties must be of the form Ïˆâ€² = t â—¦ g â—¦Ïˆ, where g is a linear automorphism of Rd induced by a matrix M in the group GLd Z of all invertible d Ã— d matrices with integer entries (this corresponds to choosing a basis for (bA âˆ’ w) âˆ© Zn+1 different from m1, . . . ,md), and t is the translation by some vector in Zd âŠ‚ Rd (this corresponds to choosing an element of bA âˆ© Zn+1 different from w). By multilinear algebra, changing Ïˆ with Ïˆâ€² merely replaces â„¦A with det(M)â„¦A and, since det(M) = Â±1, up to sign â„¦A does not depend on Ïˆ. As an example, consider the following five simplexes in R3: â€¢ S1 = the convex hull of (0, 1/3, 1), (1/3, 1, 1), (1/9, 8/9, 1); â€¢ S2 = the convex hull of (1/2, 1/4, 1), (1, 1/2, 1); â€¢ S3 = the convex hull of (1/3, 3/5, 1), (1/3, 1, 1); â€¢ S4 = {(1/2, 1/2, 1)}; â€¢ S5 = {(2/7, 1/7, 1)}. All of S1, . . . , S5 lie in the unit square of the hyperplane {x3 = 1}; we provide a sketch for the readerâ€™s convenience S1 S2 S3 S4 S5 Let Î»2, Î»1, Î»0 be the usual 2-dimensional, 1-dimensional, 0-dimensional Lebesgue measures on {x3 = 1}; we have Î»2(S1) = 1/18, Î»1(S2) = âˆš 5/4, Î»1(S3) = 2/5, Î»0(S4) = Î» 0(S5) = 1. Now, the affine span of S1 is all of {x3 = 1}, which intersects Z3 nontrivially; hence the index of S1 is 1 and Î½aff(S1) = Î» 2. The affine span of S2 again contains points in Z3, e.g., w = (0, 0, 1). An appropriate affine isomorphism Ïˆ : aff(S2)â†’ R (i.e., one that establishes a bijection between aff(S2)âˆ©Z3 and Z âŠ‚ R) is determined 8 G. PANTI, D. RAVOTTI by mapping w to 0 and v = (2, 1, 1) to 1. The line segment [w,v] has thus Î½aff(S2)- measure 1 and Î»1-measure âˆš 5, so that Î½aff(S2) = ( âˆš 5)âˆ’1Î»1. The affine span of S3 does not contain points in Z3, and neither does 2 aff(S3). On the other hand, 3 aff(S3) is the line passing through w = (1, 0, 3) and v = (1, 1, 3), so the index of S3 is 3; we can take Ïˆ : 3 aff(S3)â†’ R as the unique affine map that sends w to 0 and v to 1. By (2) we have Î½aff(S3)(S3) = length of Ïˆ[3S3] 9 . One easily checks that Ïˆ[3S3] is the interval [9/5, 3] in R and concludes that Î½aff(S3)(S3) = 2/15; since Î» 1(S3) = 2/5, we have Î½aff(S3) = 3 âˆ’1Î»1. Finally, Î½aff(S4) = Î½aff(S5) = Î» 0 by definition. If d > 0 and b = 1 then Î½aff(S)(S) is the relative volume of S [2, Â§5.4]. More generally we have the following lemma. Lemma 2.6. Let d > 0 and let S be a d-dimensional simplex, not necessarily rational, whose vertices w1, . . . ,wd+1 lie on {a = 1}, for some a âˆˆ Hom(Zn+1,Z). Assume that the subspace V spanned by w1, . . . ,wd+1 in Rn+1 is defined over Q, and let m1, . . . ,md+1 be a Z-basis for the free Z-module Zn+1 âˆ© V . Let M âˆˆ GLd+1R be defined by (w1 Â· Â· Â·wd+1) = (m1 Â· Â· Â·md+1)M . Then for every affine function f : S â†’ R we haveâˆ« S f dÎ½aff(S) = |det(M)|(f(w1) + Â· Â· Â·+ f(wd+1)) (d+ 1)! . Proof. It is obvious that âˆ« S f dÎ», where Î» is any multiple of the d-dimensional Lebesgue measure, is the product of Î»(S) and the average value of f over the vertices of S. Since Î½aff(S) is such a multiple, we just need to check the stated formula for f = 1l, namely Î½aff(S)(S) = |det(M)| d! . (3) Writing b for the least positive integer such that b aff(S) contains an integer point, we have by definition Î½aff(S)(S) = b âˆ’(d+1)Î½aff(bS)(bS), so everything boils down to proving Î½aff(bS)(bS) = |det(bM)| d! . (4) Now, the strip V âˆ© {0 < a < 1} does not contain integer points and hence nei- ther does the strip V âˆ© {0 < a < b}. It follows that Zn+1 âˆ© V has a Z-basis (r1, . . . , rd+1) with r1, . . . , rd âˆˆ V âˆ©{a = 0} and rd+1 âˆˆ V âˆ©{a = b} = aff(bS). Let (bw1 Â· Â· Â· bwd+1) = (r1 Â· Â· Â· rd+1)R; then R âˆˆ GLd+1R has last row (1 Â· Â· Â· 1). As in Example 2.5 we define Ïˆ : aff(bS)â†’ Rd by sending rd+1 to 0 and ri+rd+1 to the i-th element ei of the standard basis of Rd. Thus Î½aff(bS)(bS) is the ordinary volume of Ïˆ(bS) in Rd, namely |det(P )|/d!, where P is the (d+ 1)Ã— (d+ 1) matrix (see, e.g., [32]) whose last row is (1 Â· Â· Â· 1) and whose upper dÃ— (d+ 1) minor P â€² is defined by (Ïˆbw1 Â· Â· Â· Ïˆbwd+1) = (e1 Â· Â· Â· ed)P â€². We claim that P = R. Indeed, let U be the (d + 1) Ã— (d + 1) matrix that has 1 along the main diagonal and the last row, and 0 otherwise. Then (bw1 Â· Â· Â· bwd bwd+1) = (r1 + rd+1 Â· Â· Â· rd + rd+1 rd+1)Uâˆ’1R, MEASURES INDUCED BY UNITS 9 and each column of Uâˆ’1R adds up to 1 (because (1 Â· Â· Â· 1 1)Uâˆ’1 = (0 Â· Â· Â· 0 1), and R has last row (1 Â· Â· Â· 1 1)). Hence we get (Ïˆbw1 Â· Â· Â· Ïˆbwd Ïˆbwd+1) = (e1 Â· Â· Â· ed 0)Uâˆ’1R = (e1 Â· Â· Â· ed 0)R. Therefore the d Ã— (d + 1) upper minor of R is P â€², and since the last row of R is (1 Â· Â· Â· 1) we have P = R, as claimed. We have thus proved (4) for a specific choice â€”namely (m1 Â· Â· Â·md+1) = (r1 Â· Â· Â· rd+1), whence bM = Râ€” of the basis of Zn+1 âˆ© V . But any other choice is the image of (r1 Â· Â· Â· rd+1) by a matrix in GLd+1 Z, and hence (4) remains valid.  Example 2.7. Let S1, S2, S3 be as in Example 2.5; we can take a = x3. The subspace V1 spanned by the vertices of S1 is all of R3, so we can take the standard basis of R3 as m1,m2,m3, whence M1 = ï£«ï£­ 0 1/3 1/91/3 1 8/9 1 1 1 ï£¶ï£¸ . By (3) we have Î½aff(S1)(S1) = |det(M1)|/2! = 1/18, in agreement with the direct checking of Example 2.5. The subspace V2 spanned by the vertices of S2 is {x1âˆ’ 2x2 = 0}, that intersects Z3 is the free Z-module Z(0, 0, 1) + Z(2, 1, 0). The matrix M2 is then determined by ï£«ï£­1/2 11/4 1/2 1 1 ï£¶ï£¸ = ï£«ï£­0 20 1 1 0 ï£¶ï£¸M2, hence M2 = ( 1 1 1/4 1/2 ) , and Î½aff(S2)(S2) = |det(M2)|/1! = 1/4. The computation for S3 is analogous. Definition 2.8. A d-dimensional rational polytopal complex is a finite set Î£ of rational polytopes in Rn+1 such that each face of each element of Î£ belongs to Î£, every two elements intersect in a â€”possibly emptyâ€” common face, at least one element is d-dimensional and none is l-dimensional, for d < l â‰¤ n + 1. If all the elements of Î£ are simplexes, we say that Î£ is a simplicial complex. For 0 â‰¤ l â‰¤ d, let Î£max(l) be the set of all l-dimensional polytopes of Î£ which are not properly contained in any element of Î£. A rational polytopal set W is the underlying set W = â‹ƒ Î£ of some rational polytopal complex Î£. Lemma 2.9. Let W = â‹ƒ Î£ = â‹ƒ Î  be a polytopal set. Then: (i) If S âˆˆ Î£ is l-dimensional, then Î S = {F âˆ©P : F is a face of S and P âˆˆ Î } is a pure polytopal complex (i.e., (Î S) max(r) = âˆ… for every r < l). (ii) If S âˆˆ Î£max(l), then there exists P âˆˆ Î max(l) such that S âˆ© P is l- dimensional. (iii) â‹ƒ Î£max(l) = â‹ƒ Î max(l), for every l. (iv) Î£ and Î  have the same dimension. Proof. (i) Clearly Î S is a polytopal complex [29, 2.8.6]. Let R âˆˆ (Î S)max(r) for some r â‰¤ l, and let w be a point in relint(R). Then w /âˆˆ Râ€² for any R 6= Râ€² âˆˆ Î S , and therefore there exists an open ball B âŠ‚ Rn+1 centered at w and such that B âˆ©R = B âˆ©â‹ƒÎ S = B âˆ© S. The latter set is l-dimensional, and hence r = l. 10 G. PANTI, D. RAVOTTI (ii) Let R âˆˆ (Î S)max(l) be as in (i). Then R = Sâˆ©P for some P âˆˆ Î max(p), with l â‰¤ p. By (i), Î£P is a pure p-dimensional complex, and hence S âˆ© P is contained in some p-dimensional element Sâ€² âˆ© P of Î£P . Therefore (S âˆ© Sâ€²) âˆ© P = S âˆ© P is p-dimensional and l â‰¥ dim(S âˆ© Sâ€²) â‰¥ p; thus P âˆˆ Î max(l). (iii) Let S âˆˆ Î£max(l). Then S = â‹ƒÎ S = â‹ƒ(Î S)max(l), and by the proof of (ii) every R âˆˆ (Î S)max(l) is contained in some P âˆˆ Î max(l). This shows the left-to-right inclusion, and the other inclusion is analogous. (iv) is immediate from (iii).  Definition 2.10. The dimension of the polytopal set W is the dimension of any polytopal complex Î£ of which W is the underlying set; this makes sense because of Lemma 2.9(iv). Let 0 â‰¤ l â‰¤ d = dim(W ). The l-dimensional support of W is the set of all hyperplanes of the form aff(S), for some S âˆˆ Î£max(l). The set A1, A2, . . . , Arl of l-dimensional supporting hyperplanes is finite â€”possibly emptyâ€” and, by Lemma 2.9(ii), depends on W only. For every l such that W has at least one l-dimensional supporting hyperplane, and for every Borel subset B of W , define Î½lW (B) = Î½A1 ( A1 âˆ©B âˆ© â‹ƒ Î£max(l) ) + Â· Â· Â·+ Î½Arl ( Arl âˆ©B âˆ© â‹ƒ Î£max(l) ) . Since Î½Ai(Ai âˆ© Aj) = Î½Aj (Ai âˆ© Aj) = 0 for i 6= j, one checks easily that Î½lW is a Borel finite measure on W . Note that Î½0W is the counting measure on the set of isolated points of W . As we will be concerned with the measures Î½lW , for l < d, only in the last section of this paper, we save notation by writing Î½W for Î½ d W . 3. Asymptotic distribution of primitive points From Lemma 2.3 it is clear that in order to deal with Cesa`ro means of discrete states we need some understanding of the distribution of primitive points in rational cones. For d â‰¥ 1 Jordanâ€™s generalized totient Ï•d : N â†’ N is the arithmetical function defined by Ï•d(k) = âˆ‘ h|k Âµ ( k h ) hd = kd âˆ p|k p prime ( 1âˆ’ 1 pd ) , where Âµ is the MoÂ¨bius function, defined by Âµ(k) = 0 if k is not squarefree, Âµ(k) = 1 if k is the product of an even number of distinct prime factors, and Âµ(k) = âˆ’1 otherwise. Clearly Ï•1 is Eulerâ€™s totient. We have Î¦d(k) = âˆ‘ tâ‰¤k Ï•d(t) = 1 (d+ 1)Î¶(d+ 1) kd+1 +O(kd); (5) here the first identity is a definition while the second one, which involves Riemannâ€™s zeta function Î¶, is well known [25, pp. 193â€“195]. As usual, the meaning of identities Î±(k) = Î²(k) + O ( Î³(k) ) such as (5) above is that there exists a constant C > 0 satisfying |Î±(k) âˆ’ Î²(k)| < CÎ³(k) for every k. Analogously, Î±(k) = Î²(k) + o ( Î³(k) ) means that limkâ†’âˆž ( Î±(k) âˆ’ Î²(k))/Î³(k) = 0. We will need the following fact about Cesa`ro convergence. Lemma 3.1. Let Î± : Nâ†’ R be bounded, let 0 = n0 < n1 < n2 < Â· Â· Â· be a strictly increasing sequence of natural numbers, and let Î² âˆˆ R. Then: MEASURES INDUCED BY UNITS 11 (i) if lim kâ†’âˆž 1 nk âˆ’ nkâˆ’1 âˆ‘ nkâˆ’1<tâ‰¤nk Î±(t) = Î², then lim kâ†’âˆž 1 nk âˆ‘ tâ‰¤nk Î±(t) = Î²; (6) (ii) if (6) holds and limkâ†’âˆž(nk âˆ’ nkâˆ’1)/nk = 0, then lim kâ†’âˆž 1 k âˆ‘ tâ‰¤k Î±(t) = Î². Proof. (i) is due to Cauchy [7, p. 378], and (ii) is [19, Lemma 2.4.1].  Lemma 3.2. Let S âŠ† [0, 1]n be a rational polytope of dimension d â‰¥ 1. Let u = a1x1 + Â· Â· Â·+ anxn + an+1 be an affine function with integer coefficients which is strictly positive on S, and let u be its homogeneous correspondent. Let c be a positive multiple of the index of the d-dimensional rational polytope S1 = Cone(S)âˆ© {u = 1}, and let Îž(S, t) be the number of primitive points in Cone(S) âˆ© {u â‰¤ t}. Then lim kâ†’âˆž Îž(S, ck) Î¦d(ck) = Î½aff(S1)(S1). Proof. By the definition of the index b of S1, the integer points in Cone(S) âˆ© {u â‰¤ ck} are contained in the disjoint union â‹ƒ{tbS1 : 1 â‰¤ t â‰¤ ck/b}. Let LbS1(t) (respectively, PbS1(t)) be the number of integer (respectively, primitive) points in tbS1. Since LbS1(t) = âˆ‘ h|t PbS1(h), we have by MoÂ¨bius inversion PbS1(t) = âˆ‘ h|t Âµ ( t h ) LbS1(h). By the Ehrhart theory [31, Â§4.6.2], [2, Theorem 3.23], LbS1(h) is a quasipolynomial of degree d and finite period e, with e dividing the lcm of the denominators of the vertices of bS1. More precisely, LbS1(h) has the form LbS1(h) = Î½aff(bS1)(bS1)h d + ldâˆ’1(h)hdâˆ’1 + Â· Â· Â·+ l1(h)h+ l0(h), with ldâˆ’1(h), . . . , l0(h) rational numbers that only depend on the residue class of h modulo e. Fix a number M such that |lj(h)| â‰¤M for every 0 â‰¤ j < d and 1 â‰¤ h. We thus obtain PbS1(t) = âˆ‘ h|t Âµ ( t h )[ Î½aff(bS1)(bS1)h d + âˆ‘ j lj(h)h j ] = Î½aff(bS1)(bS1)Ï•d(t) + âˆ‘ j [âˆ‘ h|t Âµ ( t h ) lj(h)h j ] = Î½aff(bS1)(bS1)Ï•d(t) + o ( Ï•d(t) ) , because 1 Ï•d(t) âˆ£âˆ£âˆ£âˆ£âˆ£âˆ‘ j [âˆ‘ h|t Âµ ( t h ) lj(h)h j ]âˆ£âˆ£âˆ£âˆ£âˆ£ â‰¤ dMÏ•d(t) âˆ‘ h|t âˆ£âˆ£âˆ£âˆ£Âµ( th )âˆ£âˆ£âˆ£âˆ£hdâˆ’1, 12 G. PANTI, D. RAVOTTI and the latter goes to 0 as t goes to infinity [28, Â§2]. Therefore Îž(S, ck) = âˆ‘ tâ‰¤ck/b PbS1(t) = Î½aff(bS1)(bS1)Î¦d(ck/b) + âˆ‘ tâ‰¤ck/b o ( Ï•d(t) ) . So we getâˆ£âˆ£âˆ£âˆ£âˆ£Îž(S, ck)Î¦d(ck) âˆ’ Î½aff(bS1)(bS1)Î¦d(ck/b)Î¦d(ck) âˆ£âˆ£âˆ£âˆ£âˆ£ = âˆ£âˆ£âˆ£âˆ£âˆ£ âˆ‘ tâ‰¤ck/b o ( Ï•d(t) ) Î¦d(ck) âˆ£âˆ£âˆ£âˆ£âˆ£ â‰¤ âˆ‘ tâ‰¤ck/b âˆ£âˆ£o(Ï•d(t))âˆ£âˆ£âˆ‘ tâ‰¤ck/b Ï•d(t) , and the last expression goes to 0 as k goes to infinity by Lemma 3.1(i). Finally, due to the asymptotic estimate (5), lim kâ†’âˆž Î½aff(bS1)(bS1) Î¦d(ck/b) Î¦d(ck) = Î½aff(bS1)(bS1) 1 bd+1 = Î½aff(S1)(S1).  4. The main result Lemma 4.1. Let W âŠ† Rn+1 be a rational polytopal set, and let yÂ¯ = y1,y2,y3, . . ., zÂ¯ = z1, z2, z3, . . . be sequences of points in W . Suppose that for every rational polytope T âŠ†W the Cesa`ro average of 1lT along yÂ¯ exists, say lim kâ†’âˆž 1 k âˆ‘ tâ‰¤k 1lT (yt) = A(1lT , yÂ¯). Then: (i) for every f âˆˆ C(W ), the Cesa`ro average A(f, yÂ¯) exists; (ii) the functional A(âˆ’, yÂ¯) : C(W ) â†’ R is linear, positive (i.e., A(f, yÂ¯) â‰¥ 0 if f â‰¥ 0), and normalized (i.e., A(1lW , yÂ¯) = 1). By the Riesz representation theorem, A(âˆ’, yÂ¯) is induced by integration w.r.t. a uniquely defined Borel probability measure on W ; (iii) if, for every T , the average A(1lT , zÂ¯) exists and equals A(1lT , yÂ¯), then A(f, zÂ¯) = A(f, yÂ¯) for every f âˆˆ C(W ). Proof. Since by hypothesis the Cesa`ro averages along yÂ¯ exist for all characteristic functions 1lT , they exist for all step functions, i.e., all R-linear combinations of such characteristic functions. The proof is now straightforward from the fact that the set of step functions is dense in Lâˆž(W ) (the Banach space of all bounded functions on W with the topology of uniform convergence).  The following is our main result. Theorem 4.2. Let H be a finitely presented cancellative hoop in which a unit u has been fixed. Let e1, e2, e3, . . . be an enumeration without repetitions of all the discrete extremal states of (H,u) according to nondecreasing denominators. Then for every h âˆˆ H the limit mu(h) = lim kâ†’âˆž 1 k âˆ‘ tâ‰¤k et(h) exists, does not depend on the enumeration, and the function mu : H â†’ Râ‰¥0 thus defined is an automorphism-invariant state. MEASURES INDUCED BY UNITS 13 Proof. Let n â‰¥ 0 be the least integer such that H can be generated by n+1 elements h1, . . . , hn+1. Remark 4.3. We do not require h1, . . . , hn+1 â‰¤ u. In particular, the MV-algebra Î“(H,u) is still finitely generated â€”a simple application of the Riesz decomposition property [14, Proposition 2.2]â€”, but the least cardinality of a generating set may be larger than n+1. For example, let H = Free2(CH), and let u = x1âˆ¨(âˆ’kx1 +1) for some integer k â‰¥ 1. Then n = 1, because H is not generable by a single element. On the other hand, Eu contains k + 2 discrete states of denominator 1, namely the states h 7â†’ h(w)/u(w) for w âˆˆ {0, 1, 1/2, 1/3, 1/4, . . . , 1/(k + 1)}. The usual representation of Î“(H,u) as an MV-algebra, i.e., as a quotient of Freem(MV) for some integer m, assumes that u is represented by the constant function 1l. Now, the only points in the unit cube [0, 1]m that correspond to states of denominator 1 w.r.t. the unit 1l are the 2m vertices of the cube. In our case we need k + 2 such points, hence presenting Î“(H,u) as an MV-algebra requires at least log2(k + 2) generators. Our H can then be presented as ã€ˆx1, . . . , xn+1; f1(xÂ¯) = g1(xÂ¯), . . . , fr(xÂ¯) = gr(xÂ¯)ã€‰. As cited in Â§2, Freen+1(CH) ' M([0, 1]n)â‰¥0. Also, W = {w âˆˆ [0, 1]n : fi(w, 1 âˆ’ (w1 âˆ¨ Â· Â· Â· âˆ¨ wn)) = gi(w, 1 âˆ’ (w1 âˆ¨ Â· Â· Â· âˆ¨ wn)) for every i} is a rational polytopal set of dimension 0 â‰¤ d â‰¤ n, and the hoop homomorphism Ï : H â†’ M(W )â‰¥0 defined by Ïh1 = x1 W , . . ., Ïhn = xn W , Ïhn+1 = ( 1lâˆ’ (x1 âˆ¨ Â· Â· Â· âˆ¨ xn) ) W is a McNaughton representation. We adopt the notation of Definition 2.2. The case d = 0 is trivial. Indeed, in this case W is just a finite set of rational points, and by Lemma 2.1(ii) the given enumeration is finite, say e1, e2, . . . , er. Therefore, mu is always defined and is a state. Given any automorphism Ïƒ of H such that Ïƒ(u) = u, the sets {e1, e2, . . . , er} and {e1 â—¦Ïƒ, e2 â—¦Ïƒ, . . . , er â—¦Ïƒ} are equal, and hence mu(h) = mu ( Ïƒ(h) ) for every h. Let now d â‰¥ 1; by Lemma 2.3, the enumeration e1, e2, e3, . . . corresponds to an enumeration w1,w2,w3, . . . of all primitive points in Cone(W ) according to nondecreasing values of u. Let wâ€²t = wt/u(wt) be the point of intersection of W1 with the ray Râ‰¥0wt; by Lemma 2.3 et(h) = h(wâ€²t), so we must show that mu(h) = lim kâ†’âˆž 1 k âˆ‘ tâ‰¤k h(wâ€²t) (7) exists. Since h  W1 is a continuous function, we can use Lemma 4.1(i) to prove the convergence of (7). Let then T be a rational polytope contained in W1. Us- ing [29, 2.8(6)] we can construct a polytopal complex Î£ such that W1 = â‹ƒ Î£ and T is a union of elements of Î£; we can thus safely assume T âˆˆ Î£. Note that we do not need that Î£ is a simplicial complex, nor that it satisfies any unimodularity condition (see [23] for unimodular simplicial complexes). Let c be the lcm of the d-indices of the d-dimensional polytopes in Î£. The set of primitive points in Cone(W ) is then partitioned in blocks B1, B2, B3, . . ., where Bk = {w âˆˆ Cone(W ) : w is primitive and c(kâˆ’ 1) < u(w) â‰¤ ck}. For every k â‰¥ 1, let nk be such that wnk âˆˆ Bk and wnk+1 âˆˆ Bk+1. Generalizing the notation in Lemma 3.2, let Îž(W, t) be the number of primitive points in Cone(W ) âˆ© {u â‰¤ t}. Then Îž(W, ck) = âˆ‘ {(S) Â· Îž(S, ck) : S âˆˆ Î£}, 14 G. PANTI, D. RAVOTTI where (S) is either +1, 0 or âˆ’1, according to the inclusion-exclusion principle applied to S w.r.t. the combinatorial structure of Î£. Since (S) is necessarily +1 if S is d-dimensional, and Îž(S, ck) = o ( Î¦d(ck) ) if dim(S) < d, from Lemma 3.2 and the estimate (5) we obtain Îž(W, ck) = Î½W1(W1)Î¦d(ck) + o ( Î¦d(ck) ) = Î½W1(W1) (d+ 1)Î¶(d+ 1) kd+1 + o(kd+1). (8) We thus have, for every k â‰¥ 1, 1 nk âˆ‘ tâ‰¤nk 1lT (w â€² t) = 1 nk âˆ‘ tâ‰¤nk 1lCone(T )(wt) = Îž(T, ck) Îž(W, ck) = Îž(T, ck)/Î¦d(ck) Îž(W, ck)/Î¦d(ck) . Therefore, by Lemma 3.2, (5) and (8), we obtain lim kâ†’âˆž 1 nk âˆ‘ tâ‰¤nk 1lT (w â€² t) = Î½W1(T ) Î½W1(W1) ; (9) note that Î½W1(T ) = 0 if dim(T ) < d. From (8) it is immediate that limkâ†’âˆž(nk âˆ’ nkâˆ’1)/nk = 0, so we apply Lemma 3.1(ii) and conclude lim kâ†’âˆž 1 k âˆ‘ tâ‰¤k 1lT (w â€² t) = Î½W1(T ) Î½W1(W1) . (10) Any enumeration of the discrete extremal states of (H,u) according to nonde- creasing denominators must induce the same partition B1, B2, B3, . . . of the prim- itive points in Cone(W ). Since the limits (9) and (10) only depend on this latter block partition, Lemma 4.1(iii) shows that (7) does not depend on the enumeration. By Lemma 4.1(ii), mu is a state on (H,u). Finally, let Ïƒ be an automorphism of H that fixes u. As in the d = 0 case, precomposition with Ïƒ is a homeomorphism of Eu preserving the discrete states and their denominators. Therefore e1 â—¦ Ïƒ, e2 â—¦ Ïƒ, e3 â—¦ Ïƒ, . . . is another enumeration of the discrete extremal states of (H,u) according to nondecreasing denominators. By the above remarks, the Cesa`ro limit of h w.r.t. the new enumeration, namely mu ( Ïƒ(h) ) , equals the Cesa`ro limit of h w.r.t. the old enumeration, namely mu(h). Hence mu is automorphism-invariant.  Corollary 4.4. Adopt the hypotheses of Theorem 4.2 and the relative notation. Then, for every h âˆˆ H, we have mu(h) = 1 Î½W1(W1) âˆ« W1 h W1 dÎ½W1 . Proof. If d = 0, then Î½W1 is the counting measure on the finite set W1 = {wâ€²1, . . . ,wâ€²r}, which is in bijection with {e1, . . . , er}; since et(h) = h(wâ€²t), our statement is immediate. If d â‰¥ 1 then, by Lemma 4.1(ii) applied to W1, mu(h) is given by integration of h W1 w.r.t. a certain Borel finite measure on W1. By (10), that measure is Î½W1/Î½W1(W1).  By realizing W1 as the underlying set of a simplicial complex âˆ† such that h  âˆ† is affine for every S âˆˆ âˆ† (this is always possible, see, e.g., the proof of [23, The- orem 4.1]), Lemma 2.6 provides an efficient way for computing the expression for mu(h) given by Corollary 4.4; we will make use of this in Â§7. MEASURES INDUCED BY UNITS 15 5. Topological dimension without topology The maximal spectrum of H is an invariant of H, and in particular its topological dimension â€”which is an integer â‰¥ 0 [16, Definition III 1], [10, Definition 1.1.1]â€” is implicitly determined by H. The results in Â§3 and Â§4 provide an expression for this integer that bypasses topology; we will return to dimensional issues in the final section of this paper. Theorem 5.1. Let H be a finitely presented cancellative hoop. Let u âˆˆ H be a unit and let ](Eu â‰¤ t) denote the number of discrete extremal states of (H,u) of denominator â‰¤ t. Then the limit l = lim tâ†’âˆž log ( ](Eu â‰¤ t) ) log(t) exists and is an integer not depending on u. We have l = 0 iff Eu is finite iff MaxSpecH has topological dimension 0. Otherwise, 2 â‰¤ l â‰¤ (the minimum cardi- nality of a generating set for H), and MaxSpecH has topological dimension l âˆ’ 1. Proof. As in the proof of Theorem 4.2, we identify H with M(W )â‰¥0, where W is a polytopal set in [0, 1]n and n + 1 is the minimum cardinality of a generating set. Clearly l = 0 if Eu is a finite set. We know from Lemma 2.1(ii) that W , MaxSpecH and Eu are canonically homeomorphic, so if Eu is not a finite set then W has dimension d â‰¥ 1. Let then c be as in the proof of Theorem 4.2 and let k(t) = dt/ce. Then c(k(t)âˆ’ 1) < t â‰¤ ck(t) and log ( Îž ( W, c(k(t)âˆ’ 1))) log ( ck(t) ) â‰¤ log(Îž(W, t))) log(t) â‰¤ log ( Îž ( W, ck(t) )) log ( c(k(t)âˆ’ 1)) . Since ](Eu â‰¤ t) = Îž(W, t), our statements follow readily from (8) and the highly nontrivial fact that the dimension of W as a polytopal set coincides with its topo- logical dimension [10, pp. 101â€“102].  Remark 5.2. In general, in the statements of Theorem 4.2 and of Theorem 5.1 it is not possible to replace â€œfinitely presentedâ€ with â€œfinitely generatedâ€. For example, let 0 < Î± < 1 be any irrational number, and let W âŠ‚ [0, 1]2 be the line segment of extrema (Î±, 0) and (Î±, 1). Then ( M(W )â‰¥0, 1l ) is a three-generated, countably presented cancellative hoop with unit that has no discrete extremal state at all. 6. Absolute continuity Let H be a separating subhoop of some C(X)â‰¥0 (i.e., the inclusion map of H in C(X)â‰¥0 is a representation). Assume that H, as an abstract hoop, is finitely presentable. Let u1, u2 âˆˆ H be two arbitrary units; we are not assuming any structure either on X (besides being a compact Hausdorff space), or on the elements of H (besides being continuous functions). Note that u1 and u2 may lie in different orbits under the action of the automorphism group of H; equivalently, the MV- algebras Î“(H,u1) and Î“(H,u2) may not be isomorphic. This is the case, e.g., of the functions 1l and u of Remark 4.3, which are both units in M([0, 1])â‰¥0. Let m1,m2 be the automorphism-invariant states determined by Theorem 4.2. By Lemma 2.1(iv) there exist two uniquely determined Borel finite measures Âµ1, Âµ1 on X such that mi(h) = âˆ« X hdÂµi, 16 G. PANTI, D. RAVOTTI for every h âˆˆ H and i = 1, 2. Theorem 6.1. Under the above hypotheses and notation, each of Âµ1 and Âµ2 is absolutely continuous w.r.t. the other. More precisely, let d be the topological dimension of X, as given by Theorem 5.1. We have: (i) if d = 0, then dÂµ2 = u1 u2 dÂµ1; (11) (ii) if d â‰¥ 1, then dÂµ2 = C ( u1 u2 )d+2 dÂµ1, where C is the constant C = (âˆ« X ud+21 ud+12 dÂµ1 )âˆ’1 . We devote the rest of this section to the proof of Theorem 6.1. The case d = 0 is trivial. Indeed, in this case X is a finite set, say X = {p1, Â· Â· Â· , pr}, in bijection with Eui , for i = 1, 2, via pj 7â†’ ( h 7â†’ h(pj)/ui(pj) ) . All extremal states are discrete, so mi(h) = r âˆ’1âˆ‘ 1â‰¤jâ‰¤r h(pj)/ui(pj). The measure Âµi is therefore Âµi = 1 r âˆ‘ 1â‰¤jâ‰¤r 1 ui(pj) Î´pj , where Î´pj is the Dirac unit measure at pj , and the formula (11) is clear. Assume now d â‰¥ 1; we shall prove that there exists a constant C such thatâˆ« X f dÂµ2 = C âˆ« X f Â· ( u1 u2 )d+2 dÂµ1, (12) for every continuous function f : X â†’ R. As in the proof of Theorem 4.2, we construct a McNaughton representation Ï : H â†’ M(W )â‰¥0 for a certain d- dimensional polytopal set W âŠ† [0, 1]n. We adopt the notation in the proof of The- orem 4.2; in particular, for i = 1, 2, ui is the homogeneous correspondent of Ïui, and Wi = Cone(W ) âˆ© {ui = 1}. We thus have two representations Ïi : H â†’ C(Wi)â‰¥0, given by Ïih = h Wi. We construct a rational polytopal complex Î£ having W as its underlying set and such that both Ïu1 and Ïu2 are affine on each polytope of Î£. Then Î£i = {Si : Si = Cone(S) âˆ©Wi, for S âˆˆ Î£} is a rational polytopal complex and â‹ƒ Î£i = Wi. Let S âˆˆ Î£ be d-dimensional, let bi be the index of Si, and choose affine isomorphisms Ïˆi as in Definition 2.4 from aff(biSi) to Rd. We display our data in a diagram b2S2 Ïˆ2 }} S2 b2oo // W2 R2 Rd b1S1 Ïˆ1 oo G OO S1 b1 oo P OO // W1 P OO R1 // X The unnamed maps are inclusions, and P,R1, R2 are the homeomorphisms of Lemma 2.1(iii) induced by Ï1, Ï2, and the identity representation; as in Defini- tion 2.4 bi denotes multiplication by bi. We define G = b2 â—¦ P â—¦ bâˆ’11 ; by explicit computation G(w) = b2w/u2(w). Everything is commutative, except for the left- hand-side triangle, which in general is not. Let then F = Ïˆ2 â—¦ G â—¦ Ïˆâˆ’11 ; it is a MEASURES INDUCED BY UNITS 17 diffeomorphism between the interiors of the d-dimensional polytopes Ïˆ1b1S1 and Ïˆ2b2S2. Lemma 6.2. Let p be a point in the interior of Ïˆ1b1S1; then the absolute value jF (p) of the determinant of the Jacobian matrix of F at p has value jF (p) = ( b2 u2(Ïˆ âˆ’1 1 p) )d+1 . Proof. Let T âŠ† Ïˆ1b1S1 be a d-dimensional simplex, not necessarily rational, containing p in its interior. By [30, Theorem 7.24], jF (p) is the limit, for T shrinking to p, of the ratio vol(FT )/ vol(T ). By definition, that ratio is Î½aff(b2S2)(GÏˆ âˆ’1 1 T )/Î½aff(b1S1)(Ïˆ âˆ’1T ). Let V be the (d + 1)-dimensional real vec- tor space spanned by S inside Rn+1. Since V is defined over Q, it intersects Zn+1 in a free Z-module of rank d + 1; let m1, . . . ,md+1 be a Z-basis for this module. Let w1, . . . ,wd+1 be the vertices of Ïˆ âˆ’1 1 T and let (w1 Â· Â· Â·wd+1) = (m1 Â· Â· Â·md+1)M for a certain M âˆˆ GLd+1R. Then Î½aff(b1S1)(Ïˆâˆ’1T ) = |detM |/d! by Lemma 2.6. Since the vertices of GÏˆâˆ’11 T are b2w1/u2(w1), . . . , b2wd+1/u2(wd+1), and the argument above applies to Î½aff(b2S2) as well, one immediately computes Î½aff(b2S2)(GÏˆ âˆ’1 1 T ) Î½aff(b1S1)(Ïˆ âˆ’1T ) = bd+12 u2(w1) Â· Â· Â·u2(wd+1) . Letting T shrink to p, the wâ€™s converge to Ïˆâˆ’11 p and our claim follows.  Recall that if L : Y â†’ Z is a continuous map between compact Hausdorff spaces and Âµ is a Borel measure on Y , then the push-forward of Âµ by L is the Borel measure Lâˆ—Âµ on Z defined by (Lâˆ—Âµ)(A) = Âµ(Lâˆ’1A). Equivalently,âˆ« Y f â—¦ LdÂµ = âˆ« Z f dLâˆ—Âµ, for every continuous function f : Z â†’ R. By Lemma 2.1(iii) applied to Ïi and the identity representation of H, there exists a unit fi âˆˆ C(Wi)â‰¥0 such that h  Wi = fi Â· (h â—¦ Ri) for every h âˆˆ H and i = 1, 2. Taking h = ui we see that fi = ui Wi ui â—¦Ri = 1 ui â—¦Ri, and therefore h Wi = h ui â—¦Ri. Setting Di = Î½Wi(Wi), we have from Corollary 4.4 mi(h) = 1 Di âˆ« Wi h Wi dÎ½Wi = 1 Di âˆ« Wi h ui â—¦Ri dÎ½Wi = 1 Di âˆ« X h Â· 1 ui dRiâˆ—Î½Wi , and therefore dÂµi = 1 Diui dRiâˆ—Î½Wi . (13) 18 G. PANTI, D. RAVOTTI The preliminaries being over, let us fix a continuous function f : X â†’ R. We choose S âˆˆ Î£max(d) and compute:âˆ« S2 f u2 â—¦R2 dÎ½W2 = âˆ« S2 f u2 â—¦R2 â„¦aff(S2) = 1 bd+12 âˆ« Ïˆ2b2S2 f u2 â—¦R2 â—¦ bâˆ’12 â—¦ Ïˆâˆ’12 dxÂ¯ = 1 bd+12 âˆ« Ïˆ2b2S2 f u2 â—¦R1 â—¦ bâˆ’11 â—¦Gâˆ’1 â—¦ Ïˆâˆ’12 dxÂ¯ = 1 bd+12 âˆ« Ïˆ1b1S1 ( f u2 â—¦R1 â—¦ bâˆ’11 â—¦Gâˆ’1 â—¦ Ïˆâˆ’12 â—¦ F ) Â· jF dxÂ¯ = âˆ« Ïˆ1b1S1 ( f u2 â—¦R1 â—¦ bâˆ’11 â—¦ Ïˆâˆ’11 ) Â· ( 1 ud+12 â—¦ Ïˆâˆ’11 ) dxÂ¯ = âˆ« Ïˆ1b1S1 (( f u2 â—¦R1 â—¦ bâˆ’11 ) Â· 1 ud+12 ) â—¦ Ïˆâˆ’11 dxÂ¯ = âˆ« Ïˆ1b1S1 (( f u2 â—¦R1 ) Â· ( 1 ud+12 â—¦ b1 )) â—¦ bâˆ’11 â—¦ Ïˆâˆ’11 dxÂ¯ = 1 bd+11 âˆ« Ïˆ1b1S1 (( f u2 â—¦R1 ) Â· 1 (u2 W1)d+1 ) â—¦ bâˆ’11 â—¦ Ïˆâˆ’11 dxÂ¯ = âˆ« S1 ( f u2 â—¦R1 ) Â· 1 (u2 W1)d+1 â„¦aff(S1) = âˆ« S1 ( f u2 â—¦R1 ) Â· 1 (u2 W1)d+1 dÎ½W1 = âˆ« S1 ( f u2 Â· ( u1 u2 )d+1) â—¦R1 dÎ½W1 . Since Î½Wi is 0 on Si âˆ© Ti for every S 6= T âˆˆ Î£max(d), we obtain from (13)âˆ« X f dÂµ2 = 1 D2 âˆ« X f u2 dR2âˆ—Î½W2 = 1 D2 âˆ« W2 f u2 â—¦R2 dÎ½W2 = 1 D2 âˆ‘ SâˆˆÎ£max(d) âˆ« S2 f u2 â—¦R2 dÎ½W2 = 1 D2 âˆ‘ SâˆˆÎ£max(d) âˆ« S1 ( f u2 Â· ( u1 u2 )d+1) â—¦R1 dÎ½W1 = 1 D2 âˆ« W1 ( f u2 Â· ( u1 u2 )d+1) â—¦R1 dÎ½W1 = 1 D2 âˆ« X f u1 Â· ( u1 u2 )d+2 dR1âˆ—Î½W1 = D1 D2 âˆ« X f Â· ( u1 u2 )d+2 dÂµ1. MEASURES INDUCED BY UNITS 19 So (12) is proved with C = D1/D2. The expression for C in (ii) follows immediately by taking f = u2 in (12). The proof of Theorem 6.1 is thus complete. 7. The local dimension at an extreme state It is apparent from the proof of Theorem 4.2 that the state mu neglects the behaviour of h âˆˆ H on the underdimensional parts of MaxSpecH. Indeed, if h, g âˆˆ H are such that Ïh = Ïg onâ‹ƒÎ£max(d), then by Corollary 4.4mu(h) = mu(g), irrespective of the behaviour of Ïh and Ïg on W \ â‹ƒÎ£max(d). Since measure- theoretic issues neglect sets of measure 0, this fact is quite natural. However, if one insists on having states capable of detecting the behaviour of the elements of H on all parts of the spectrum â€”the faithful states of [22], [23]â€” then our construction can be adapted. First of all, let us recall the inductive definition of the local dimension of a topological space at a point [16, Chapter III]: (1) The only set of dimension âˆ’1 is the empty set. (2) A space has local dimension â‰¤ n at a point p if p has arbitrarily small neighborhoods whose boundaries have dimension â‰¤ nâˆ’ 1. (3) A space has dimension â‰¤ n if it has local dimension â‰¤ n at each of its points. (4) A space has local dimension n at p if it has local dimension â‰¤ n at p, and does not have local dimension â‰¤ nâˆ’ 1 at p. (5) A space has dimension n if it has dimension â‰¤ n and does not have dimen- sion â‰¤ nâˆ’ 1. (6) A space has dimension âˆž if it does not have dimension â‰¤ n for any n. In the proof of Theorem 5.1 we already made use of the fact that the dimension of a polytopal set coincides with its topological dimension (note that throughout this paper the unqualified word â€œdimensionâ€ always refers to the affine dimension). The following lemma provides a local version of that fact. Lemma 7.1. Let W = â‹ƒ Î£ be a d-dimensional polytopal set. For every 0 â‰¤ l â‰¤ d, let W l = â‹ƒ Î£max(l) \â‹ƒ{S âˆˆ Î£ : dim(S) > l}, Ll = {w âˆˆW : the local dimension of W at w is l}. Then W l = Ll, for every l. In particular, the partition {W l : W l 6= âˆ…} of W does not depend on Î£. Proof. Since both {W l : W l 6= âˆ…} and {Ll : Ll 6= âˆ…} are partitions of W , it clearly suffices to show that W l âŠ† Ll for every l. Let w âˆˆW l. Then w does not belong to any element of Î£ of dimension > l, and hence there exists an open ball B âŠ‚ Rn+1 centered at w and such that Bâˆ©W = Bâˆ©W â€², where W â€² = â‹ƒ{S âˆˆ Î£ : dim(S) â‰¤ l} is an l-dimensional polytopal set. Thus the local dimension of W at w agrees with the local dimension of W â€² at w, which is â‰¤ l again by [10, pp. 101â€“102]. We thus have to show that the local dimension of W â€² at w is not â‰¤ l âˆ’ 1. If l = 0 this is clear, so assume l > 0 and choose S âˆˆ Î£max(l) such that w âˆˆ S. Choose a ball B 20 G. PANTI, D. RAVOTTI as above such that relint(S) is not contained in the closure of B. It is then enough to show the following: (A) Let U be an open set in W â€² such that w âˆˆ U âŠ† B, and write M for the boundary of U in W â€². Then M âˆ© relint(S) contains a point at which the local dimension of M is not â‰¤ l âˆ’ 2. Let U be as in (A) and let UÂ¯ be its closure in W â€². Then relint(S) is the disjoint union of relint(S)âˆ©U , relint(S)âˆ©M , and relint(S)\ UÂ¯ . By construction there exist points p âˆˆ relint(S) âˆ© U and q âˆˆ relint(S) \ UÂ¯ . It follows that every continuum (i.e., closed connected set) C âŠ† relint(S) containing p and q must intersect M , for otherwise (C âˆ© U) âˆª (C \ UÂ¯) would be a nontrivial disconnection of C. By Mazurkiewiczâ€™s Theorem [10, Theorem 1.8.19] applied to the open region relint(S) inside aff(S) ' Rl, the topological dimension of M âˆ© relint(S) is not â‰¤ l âˆ’ 2. Therefore there exists a point as required by (A).  We shall need the measures Î½lW of Definition 2.10. Note that, since Î½ l W is sup- ported on â‹ƒ Î£max(l), and â‹ƒ Î£max(l) \W l is a Î½lW -nullset, we haveâˆ« W f dÎ½lW = âˆ« â‹ƒ Î£max(l) f dÎ½lW = âˆ« W l f dÎ½lW , for every Riemann-integrable function f : W â†’ R. Assume now the hypotheses and the notation of Theorem 4.2; we thus have a McNaughton representation Ï : H â†’ M(W )â‰¥0 and a homeomorphism F : Eu â†’ W1 = Cone(W ) âˆ© {u = 1} as in Lemma 2.3. By Lemma 7.1, for every 0 â‰¤ l â‰¤ d = dim(Eu), F restricts to a bijection between E l u = {e âˆˆ Eu : the local dimension of Eu at e is l} and W l1. Let 0 â‰¤ l1 < l2 < Â· Â· Â· < lq = d be the dimensions at which Eliu 6= âˆ…. For each 1 â‰¤ i â‰¤ q, let ei1, ei2, ei3, . . . be an enumeration without repetitions of all the discrete states in Eliu according to nondecreasing denominators. Choose a weight vector p = (p1, . . . , pq) (i.e., p âˆˆ Rqâ‰¥0 and âˆ‘ pi = 1). Theorem 7.2. For every i = 1, . . . , q and every h âˆˆ H the limit mliu (h) = lim kâ†’âˆž 1 k âˆ‘ tâ‰¤k eit(h) (14) exists and does not depend on the enumeration. The function mpu : H â†’ Râ‰¥0 defined by mpu(h) = âˆ‘ i pim li u (h) (15) is an automorphism-invariant state, which is faithful (i.e., h 6= 0 implies mpu(h) 6= 0) iff pi > 0 for every i. Proof. Every convex combination of automorphism-invariant states is clearly an automorphism-invariant state, so it suffices to show that every mliu is such a state. Fix then 0 â‰¤ l â‰¤ d such that Elu 6= âˆ…, and say that W is the underlying set of the polytopal complex Î£. Let W = â‹ƒ Î£max(l); then W is an l-dimensional rational polytopal set which, by Lemma 2.9(iii), depends on W and l only. The restriction map Ïh 7â†’ Ïh W is a homomorphism from M(W )â‰¥0 to M(W )â‰¥0, and the latter hoop is finitely presented because W is rational. Every element of the enumeration el1, e l 2, e l 3, . . . provided by the hypotheses corresponds to a point of W , and can thus be seen as a discrete extremal state of M(W )â‰¥0, with preservation of denominators. Moreover, all discrete extremal states of M(W )â‰¥0 appear in the MEASURES INDUCED BY UNITS 21 enumeration, except those corresponding to points of W whose local dimension as points of W is > l (for example, for l = 1 in the polytopal set W = S1 âˆª Â· Â· Â· âˆª S5 of Example 2.5, we have W = S2 âˆª S3, W 1 = W \ S1, and the point of intersection of S3 with S1 is the only such point). Let W 1 = Cone(W ) âˆ© {u = 1}, W l1 = Cone(W l) âˆ© {u = 1}, and write for simplicityâ€™s sake f = h  W1. Let M > 0 be an upper bound for f , and let fâˆ’, f+ be the functions (in general not continuous) which agree with f on W l1 but are identically 0 (respectively, M) on W1 \W l1. We construct a denominator- nondecreasing sequence w1,w2,w3, . . . of all rational points of W 1, containing a subsequence wk(1),wk(2),wk(3), . . . such that e l t corresponds to wk(t), for every t (this just amounts to â€œreinsertingâ€ the missing states in the given enumeration). It is clear that we have, for every t, 1 k(t) k(t)âˆ‘ i=1 fâˆ’(wi) â‰¤ 1 t tâˆ‘ i=1 elt(h) â‰¤ 1 k(t) k(t)âˆ‘ i=1 f+(wi). (16) Now, the reinserted points (i.e., the points in the sequence (wi) which do not belong to the subsequence) are all contained in W 1 \W l1, which is a Î½lW1-nullset. By [19, Exercise 1.12 p. 179] and Theorem 4.2 applied to ( M(W )â‰¥0,u  W ) , the two extreme terms of (16) converge as tâ†’âˆž to (Î½lW1(W1))âˆ’1 âˆ« f dÎ½lW1 . Therefore the middle term converges to the same value, as was to be shown. The same argument as in Theorem 4.2 shows the automorphism-invariance of mlu. Concerning our last statement, the proof of right-to-left implication is analogous to the proof of the faithfulness of the state s in [23, Theorem 4.1]. Namely, assume p1, . . . , pq > 0 and let 0 6= h âˆˆ H, with the intent of proving mpu(h) > 0. As noted after Corollary 4.4 we can realize W1 as the underlying set of a rational simplicial complex âˆ† such that h  S is affine for every S âˆˆ âˆ†. Applying Corollary 4.4 and Lemma 2.6, we obtain mpu(h) = qâˆ‘ i=1 pi 1 Î½liW1(W1) âˆ« W1 h W1 dÎ½liW1 (17) = qâˆ‘ i=1 ( pi Î½liW1(W1) âˆ‘ Sâˆˆâˆ†max(li) Î½liW1(S)h(S) ) , (18) where h(S) is the arithmetical average of h over the vertices of S. All terms pi, Î½liW1(W1), and Î½ li W1 (S) in (18) are > 0. Since h 6= 0 implies h > 0 on at least one vertex of at least one S âˆˆ âˆ†, we have mpu(h) > 0, as desired. For the reverse implication, let pi = 0 for some 1 â‰¤ i â‰¤ q, and let âˆ† be a rational simplicial complex supported on W1. Since E li u 6= âˆ…, âˆ†max(li) contains a simplex, say S. Using elementary algebra we construct a Z-basis m1, . . . ,mli+1 of Zn+1 âˆ© (the R-subspace spanned by S) such that the ray Râ‰¥0mj intersects S in its relative interior, for every j. Let T be the intersection of S with the cone spanned positively by m1, . . . ,mli+1; let also w = m1 + Â· Â· Â·+mli+1. Since S âˆˆ âˆ†max(li) and T is contained in the relative interior of S, the simplex T has empty intersection with every element of âˆ† different from S. It readily follows (compare with Mundiciâ€™s theory of Schauder hats [24, Â§5.3]) that the function h : Cone(W1)â†’ Râ‰¥0 defined by: â€¢ h = 0 outside of Cone(T ); 22 G. PANTI, D. RAVOTTI â€¢ h(m1) = Â· Â· Â· = h(mli+1) = 0; â€¢ h(w) = 1; â€¢ for each 1 â‰¤ i â‰¤ li + 1, h is linear on the cone spanned positively by m1, . . . ,miâˆ’1,w,mi+1, . . . ,mli+1; is continuous and piecewise-linear with integer coefficients. Let h be the unique element of H such that h is the homogeneous correspondent of Ïh. Then h 6= 0 and, since pi = 0 and h = 0 outside Cone(T ), we have m p u(h) = 0 by (17), so m p u is not faithful.  Remark 7.3. In the specific case u = 1l and p = (1/q, . . . , 1/q), the state mp1l of Theorem 7.2 coincides with the state s of [23, Theorem 4.1], provided that MaxSpecH does not contain isolated points. Indeed, let h âˆˆ H = M(W )â‰¥0 for some d-dimensional rational polytopal set W âŠ† [0, 1]n; since u = 1l we have W1 = W and h  W1 = h. Choose a unimodular complex âˆ† supported on W (see [23] for all relevant definitions), such that h is affine on each sim- plex of âˆ†. Let T be an l-dimensional unimodular simplex contained in â‹ƒ âˆ†max(l) (not necessarily belonging to âˆ†), and let w1, . . . ,wl+1 be the vertices of T . By the unimodularity assumption (den(w1)w1 Â· Â· Â· den(wl+1)wl+1) is a Z-basis for Zn+1 âˆ© (the R-subspace spanned by T ). Therefore by Lemma 2.6 Î½lW (T ) = Î½aff(T )(T ) = 1 l! den(w1) Â· Â· Â· den(wl+1) . Since the unimodular simplexes generate the Borel Ïƒ-algebra, Î½lW is the measure Î»l of [23, Theorem 2.1]. Therefore the identity (18), which in our specific case reads mp1l(h) = 1 q qâˆ‘ i=1 ( 1 Î½liW (W ) âˆ‘ Sâˆˆâˆ†max(l) Î½liW (S)h(S) ) , agrees with the expression (4) on [23, p. 542] for the state s. If W contains isolated points, say W 0 = {w1, . . . ,wr} 6= âˆ…, then the situation is slightly different. Indeed, the measure Âµ0 corresponding to our m01l is Âµ0 = 1 r âˆ‘ 1â‰¤jâ‰¤r Î´wj , while the measure Ï„0 determined by (4) on [23, p. 542] is Ï„0 = ( âˆ‘ 1â‰¤jâ‰¤r 1 den(wj) )âˆ’1 Â· âˆ‘ 1â‰¤jâ‰¤r 1 den(wj) Î´wj . In general Âµ0 and Ï„0 are different, but they both are automorphism-invariant, since every automorphism of (H, 1l) must act on W 0 in a denominator-preserving way. For example, let again W = S1âˆªÂ· Â· Â·âˆªS5 be the polytopal set of Example 2.5, S4 = {v}, S5 = {w}. Then den(v) = 2, den(w) = 7, W 0 = {v,w}; take h = x1 W to be the projection on the first coordinate. Thenâˆ« W hdÂµ0 = 1 2 ( h(v) + h(w) ) = 1 2 ( 1 2 + 2 7 ) = 11 28 , MEASURES INDUCED BY UNITS 23 while âˆ« W hdÏ„0 = ( 1 2 + 1 7 )âˆ’1( h(v) 2 + h(w) 7 ) = 14 9 ( 1 4 + 2 49 ) = 19 42 . The hidden reason for the rigidity of the invariant measure on the higher- dimensional parts of the spectrum, together with its relative flexibility on the 0-dimensional part, is subtle: the 0-dimensional part is made of finitely many iso- lated discrete extremal states, while the higher-dimensional parts contain infinitely many discrete extremal states. Now, in a finite average the input data can be rear- ranged arbitrarily without affecting the final result, a fact which is definitely false for infinite averages. Actually, a classical result by Descovich (but dating back to von Neumann for the real unit interval [19, Theorems II.4.4 and III.2.5]) guarantees that every regular Borel measure on a compact Hausdorff space with no isolated points can be realized as in Lemma 4.1(ii) by enumerating appropriately the ele- ments of any given countable everywhere dense subset. In our case, the set of all discrete extremal states is such a subset, and in Theorem 4.2 the key constraint on the resulting measure is the denominator-nondecreasing condition, which becomes irrelevant precisely on the 0-dimensional part of the spectrum. As that condition depends crucially on the choice of a unit, it is apparent that units and measures are inextricably intertwined. References [1] E. Badouel, J. Chenou, and G. Guillou. An axiomatization of the token game based on Petri algebras. Fund. Inform., 77(3):187â€“215, 2007. [2] M. Beck and S. Robins. Computing the continuous discretely. Undergraduate Texts in Math- ematics. Springer, 2007. [3] M. Beck, S. V. Sam, and K. M. Woods. Maximal periods of (Ehrhart) quasi-polynomials. J. Combin. Theory Ser. A, 115(3):517â€“525, 2008. [4] W. M. Beynon. Duality theorems for finitely generated vector lattices. Proc. London Math. Soc., 31(3):114â€“128, 1975. [5] A. Bigard, K. Keimel, and S. Wolfenstein. Groupes et anneaux reÂ´ticuleÂ´s, volume 608 of Lecture Notes in Math. Springer, 1977. [6] W. J. Blok and I. M. A. Ferreirim. On the structure of hoops. Algebra Universalis, 43(2- 3):233â€“257, 2000. [7] T. J. Bromwich. An introduction to the theory of infinite series. Macmillan and Co., 1908. Available at the Open Library, http://openlibrary.org/books/OL7073755M. [8] R. Cignoli, I. Dâ€™Ottaviano, and D. Mundici. Algebraic foundations of many-valued reasoning, volume 7 of Trends in logic. Kluwer, 2000. [9] A. DvurecË‡enskij. Subdirectly irreducible state-morphism BL-algebras. Arch. Math. Logic, 50(1-2):145â€“160, 2011. [10] R. Engelking. Dimension theory. North-Holland, 1978. [11] F. Esteva, L. Godo, P. HaÂ´jek, and F. Montagna. Hoops and fuzzy logic. J. Logic Comput., 13(4):531â€“555, 2003. [12] G. Ewald. Combinatorial convexity and algebraic geometry. Springer, 1996. [13] M. Fedel, K. Keimel, F. Montagna, and W. Roth. Imprecise probabilities, bets and functional analytic methods in Lukasiewicz logic. To appear in Forum Mathematicum, 2009. [14] K. R. Goodearl. Partially ordered abelian groups with interpolation. American Mathematical Society, Providence, R.I., 1986. [15] P. HaÂ´jek. Metamathematics of fuzzy logic, volume 4 of Trends in logic. Kluwer, 1998. 24 G. PANTI, D. RAVOTTI [16] W. Hurewicz and H. Wallman. Dimension theory. Princeton Mathematical Series, v. 4. Princeton University Press, 1941. [17] A. I. Kokorin and V. M. Kopytov. Fully ordered groups. Wiley, 1974. [18] T. Kroupa. Every state on semisimple MV-algebra is integral. Fuzzy Sets and Systems, 157(20):2771â€“2782, 2006. [19] L. Kuipers and H. Niederreiter. Uniform distribution of sequences. Dover, 2006. First pub- lished in 1974 by Wiley-Interscience. [20] V. Marra. The Lebesgue state of a unital abelian lattice-ordered group. II. J. Group Theory, 12(6):911â€“922, 2009. [21] G. Metcalfe, N. Olivetti, and D. Gabbay. Proof theory for fuzzy logics, volume 36 of Applied Logic Series. Springer, 2009. [22] D. Mundici. Averaging the truth-value in Lukasiewicz logic. Studia Logica, 55(1):113â€“127, 1995. [23] D. Mundici. The Haar theorem for lattice-ordered abelian groups with order-unit. Discrete Contin. Dyn. Syst., 21(2):537â€“549, 2008. [24] D. Mundici. Advanced Lukasiewicz calculus and MV-algebras, volume 35 of Trends in Logicâ€” Studia Logica Library. Springer, 2011. [25] M. R. Murty. Problems in analytic number theory, volume 206 of Graduate Texts in Mathe- matics. Springer, 2001. [26] G. Panti. The automorphism group of falsum-free product logic. In S. Aguzzoli et al., editor, Algebraic and Proof-theoretic Aspects of Non-classical Logics, number 4460 in Lecture Notes in Artificial Intelligence, pages 275â€“289. Springer, 2007. [27] G. Panti. Invariant measures in free MV-algebras. Comm. Algebra, 36(8):2849â€“2861, 2008. [28] G. Panti. Denominator-preserving maps. Aequationes Math., 84(1-2):13â€“25, 2012. [29] C. P. Rourke and B. J. Sanderson. Introduction to piecewise-linear topology. Springer, 1972. [30] W. Rudin. Real and complex analysis. McGraw-Hill, third edition, 1987. [31] R. P. Stanley. Enumerative combinatorics. Vol. 1, volume 49 of Cambridge Studies in Ad- vanced Mathematics. Cambridge University Press, 1997. With a foreword by Gian-Carlo Rota. Corrected reprint of the 1986 original. [32] P. Stein. A note on the volume of a simplex. Amer. Math. Monthly, 73(3):299â€“301, 1966. [33] K. Yosida. On the representation of the vector lattice. Proc. Imp. Acad. Tokyo, 18:339â€“342, 1942. [34] G. M. Ziegler. Lectures on polytopes, volume 152 of Graduate Texts in Mathematics. Springer, 1995. Department of Mathematics, University of Udine, via delle Scienze 206, 33100 Udine, Italy 