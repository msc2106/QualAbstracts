ABSTRACT: 
This paper introduces a Markov chain approach that allows a rigorous analysis of agent based opinion dynamics as well as other related agent based models (ABM). By viewing the ABM dynamics as a micro description of the process, we show how the corresponding macro description is obtained by a projection construction. Then, well known conditions for lumpability make it possible to establish the cases where the macro model is still Markov. In this case we obtain a complete picture of the dynamics including the transient stage, the most interesting phase in applications. For such a purpose a crucial role is played by the type of probability distribution used to implement the stochastic part of the model which defines the updating rule and governs the dynamics. In addition, we show how restrictions in communication leading to the co-existence of different opinions follow from the emergence of new absorbing states. We describe our analysis in detail with some specific models of opinion dynamics. Generalizations concerning different opinion representations as well as opinion models with other interaction mechanisms are also discussed. We find that our method may be an attractive alternative to mean-field approaches and that this approach provides new perspectives on the modeling of opinion exchange dynamics, and more generally of other ABM.Comment: 26 pages, 12 figure. 
 
PREDICTION: 
we consider a stochastic process of social interaction , where the agents are characterized by their preferences and behaviors .<n> the interaction is modeled by a chain , where each agent is characterized by its preferences and behaviors , and the interactions are modeled by a stochastic process .<n> the stochastic process is defined by a set of stochastic differential equations , which are solved by an iterative method .<n> the stochastic process is analyzed by the finite - dimensional dynamical system , which is characterized by its time - discretized dynamical system .<n> we consider the case of a population of agents , where each agent is characterized by its preferences and behaviors , and the interactions are modeled by a stochastic process .<n> we consider the case where the interactions are modeled by a deterministic dynamical system , which is characterized by its time - discretized dynamical system .<n> we study the behavior of the population in the limit of large discretizations of the dynamical system . <n> [ [ section ] ] in this paper we consider a stochastic process of social interaction , where the agents are characterized by their preferences and behaviors .<n> the interaction is modeled by a chain , where each agent is characterized by its preferences and behaviors  
 
FULL TEXT: 
 –existence of different opinions follow from the emergence of new absorbing states. We describe our analysis in detail with some specific models of opinion dynamics. Generalizations concerning different opinion representations as well as opinion models with other interaction mechanisms are also discussed. We find that our method may be an attractive alternative to mean–field approaches and that this approach provides new perspectives on the modeling of opinion exchange dynamics, and more generally of other ABM. Keywords: Agent Based Models,Opinion Dynamics,Markov chains,Micro Macro, Lumpa- bility , Transient Dynamics . MSC: 37L60, 37N25, 05C69. 1. Introduction Recent improvements in multidisciplinary methods and, particularly, the availability of powerful computational tools are giving researchers an ever greater opportunity to investigate societies in their complex nature. The adoption of a complex systems approach allows the modeling of macro– sociological or economic structures from a bottom–up perspective — understood as resulting from the repeated local interaction of socio–economic agents — without disregarding the consequences of the structures themselves on individual behavior, emergence of interaction patterns and social welfare. Agent based models (ABM) are at the leading edge of this endeavor. When designing an agent model, one is inevitably faced with the problem of finding an acceptable compromise between realism and simplicity. If many aspects are included into the agent description, the model might be plau- sible with regard to the individual behaviors, but it will be impossible to derive rigorous analytical results. In fact, it can even be very hard to perform systematic computations to understand the model dynamics if many parameters and rules are included. On the other hand, models that allow 1 2 SVEN BANISCHA,D , RICARDO LIMAB,D AND TANYA ARAU´JOC,D for an analytical treatment often oversimplify the problem at hand. In ABM, we can find the whole spectrum between these two extremes. While simplicity is often favored by physicists in order to be able to apply their well–developed tools from statistical physics, more realistic descriptions are often desired by researchers in the humanities because they are interested in incorporating into the model a reasonable part of their qualitative knowledge at the micro and macro scales. Both views have, of course, their own merits. Our paper is a contribution to interweaving two lines of research that have developed in almost separate ways: the Markov chain approach and ABMs. The former represents the simplest form of a stochastic process while the latter puts a strong emphasis on heterogeneity and social interactions. The main expected output of our Markov chain strategy applied to ABM is a better understanding of the relationship between microscopic and macroscopic dynamical properties. Moreover, we aim to contribute not only to the understanding of the asymptotic properties of ABM but also to the transient mechanisms that rule the system on intermediate time scales. For practical purposes this is the most relevant information for two reasons: first, in our case the chains are absorbing, so the asymptotic dynamics is trivial and second, they describe the evolution of the system before external perturbations take place and possibly throw it into a new setting. Agent–based opinion models, a particular case of ABM, are among the most simple models in the lit- erature and are therefore a suitable starting point for the analysis. Especially for binary opinion models several results have been obtained by previous authors using analytical tools, as shown in the review on social dynamics by Castellano and co-workers [Castellano et al., 2009]. The most intensively stud- ied model is the voter model, originally developed by Kimura and Weiss [Kimura and Weiss, 1964] as a model for spatial conflict of two species (see also Refs. [Clifford and Sudbury, 1973, Frachebourg and Krapivsky, 1996, Slanina and Lavicka, 2003, Sood and Redner, 2005, Vazquez and Egu´ıluz, 2008, Schweitzer and Behera, 2008]). The analysis of binary opinion models is usually based on mean–field arguments. The microscopic agent configuration is mapped onto an aggregate order parameter, and the system is reformulated on the macro–scale as a differential equation which describes the temporal evolution of that parameter. A mean–field analysis for the voter model on the complete graph was presented by Slanina and Lavicka in Ref. [Slanina and Lavicka, 2003], and naturally, we come across the same results using our method as the first part of approach. Slanina and Lavicka derive expressions for the asymp- totic exit probabilities and the mean time needed to converge, but the partial differential equations that describe the full probability distribution for the time to reach the stationary state is too dif- ficult to be solved analytically ([Slanina and Lavicka, 2003], pag.4). Analytical results based on the same methods have been obtained for the voter model on d–dimensional lattices ([Cox, 1989, Frachebourg and Krapivsky, 1996, Liggett, 1999, Krapivsky and Redner, 2003]) as well as for net- works with uncorrelated degree distributions ([Sood and Redner, 2005, Vazquez and Egu´ıluz, 2008]). One step to a more realistic agent description (though still a caricature) is achieved by allowing the agents to make n–ary choices. Among the most popular models that realize this is the Axelrod model [Axelrod, 1997] , which uses vectors as state variables and bounded confidence ([Hegselmann and Krause, 2002, Deffuant et al., 2001]). In both models, the interaction probability is a function of the agent simi- larity such that similar agents tend to interact and so become more similar in the interaction. In the Axelrod model as well as in other bounded confidence models, this leads to the emergence of clustering as agents converge in homogeneous subgroups while an appropriate distance in between these subgroups increases. An analytical treatment of this process is already quite difficult (see Ref. [Castellano et al., 2000] for an approximate mean–field analysis). Our Markov chain approach shows how restrictions in the agent communication lead to the emergence of new absorbing states in the associated Markov chain which correspond to system states where different opinions co–exist. AGENT BASED MODELS AND OPINION DYNAMICS AS MARKOV CHAINS 3 The usefulness of the Markov chain formalism in the analysis of more sophisticated ABMs has been discussed by Izquierdo and co-workers ([Izquierdo et al., 2009]), who look at 10 well–known social simulation models by representing them as a time–homogeneous Markov chain. Among these models are the Schelling segregation model ([Schelling, 971a], for which some analytical results are available, for example, in Refs.[Pollicott and Weiss, 2001, Grauwin et al., 2010]), the Axelrod model (considered above) and the sugarscape model from Epstein and Axtell [Epstein and Axtell, 1996]. The main idea of Izquierdo and co-workers [Izquierdo et al., 2009] is to consider all possible configurations of the system as the state space of the Markov chain. Despite the fact that all the information of the dynamics on the ABM is encoded in a Markov chain, it is difficult to learn directly from this fact, due to the huge dimension of the configuration space and its corresponding Markov transition matrix. The work of Izquierdo and co-workers mainly relies on numerical computations to estimate the stochastic transition matrices of the models. In our opinion, a well posed mathematical basis for these models may help the understanding of many of their observed properties. Linking the micro–description of an ABM to a macro–description in the form of a Markov chain provides information about the transition from the interaction of individual actors to the complex macroscopic behaviors observed in social systems. In particular, well known conditions for lumpability make it possible to decide whether the macro model is still Markov. Conversely, this setting can also provide a suitable framework to understand the emergence of long range memory effects. In sociology, the concepts of micro and macro have long been an important subject of analysis. Dif- ferent but related meanings have been advocated by different authors (see Ref. [Alexander et al., 1987] and references therein), running from ”micro as dealing with individuals and macro as dealing with populations” to ”micro as social processes that engender relations among individuals and macro as the structure of different positions in a population and their constraints on interaction”. In any case the terms micro and macro relate in this context the action of individuals or small groups based on their mutual relations and the emergence of collective societal scopes. One of the first acknowledged synthetic formulations of this linkage between micro and macro in sociology studies is from Max Weber ([Weber, 1978], pag.29) from where we quote the following basic observation: ”within the realm of social action, certain empirical uniformities can be observed, that is, courses of action that are repeated by the actor or (simultaneously) occur among numerous actors”. We shall see how a stylized version of this belief is incorporated in our study when passing from micro to macro dynamics. Talcott Parsons [Parsons, 1954] later introduced the notion of internalization, posing an interesting question on the retroaction of the macro on the micro level of the models, to which we shall come back in section 3. See Ref. [Alexander et al., 1987] for a discussion of this topic. On the other hand our work is certainly related to the social network literature, another old out- standing branch of sociology. Sociograms, an important tool in social studies, had already been introduced by Jacob Levy Moreno in the 30s, ([Moreno, 1934], [Moreno, 1946]) inducing a graph rep- resentation of social relations, thus opening the way to social network based research. This approach has been developed since the seminal studies of John Barnes [Barnes, 1954] and it expanded rapidly with the work of Mark Granovetter [Granovetter, 1973] and many others. In our case, however, as in plenty of other models the emphasis is on the dynamics of the processes rather than on the structure alone ([Helbing, 1994, Weidlich, 2006, Schweitzer, 2003] and references therein). One of the key notions to understand the micro–macro linkage is emergence. We follow Ref. [Giesen, 1987] to describe various levels of emergence present in the sociological literature and com- ment on the links with our work. First the so called descriptive emergence problem: are ”the macro- properties a common property of many microunits” or are they something fundamentally different? This question is clearly addressed in our work. In fact, starting from a ”simple aggregative procedure” 4 SVEN BANISCHA,D , RICARDO LIMAB,D AND TANYA ARAU´JOC,D [Giesen, 1987] on the individual attributes to define the macro level, we show how the nonlinearity features of dynamical process may naturally create ”something else” at least in a stylized model. Next, related to Parson’s phenomenon of internalization practical emergence stands for the possible discrepancy, ”if the macrostructural properties of a social system no longer correspond to the inter- nalized rules and interactions of the individual actors”, which leads to ”a practical problem for the individuals acting in this system”. At the end of section 4.2 we discuss a possible quantification, in a very rough sense, of this ”falling out” ([Giesen, 1987], pag.339) of the micro and macro levels. Finally, ”far more controversial” ([Giesen, 1987], pag.339) explanatory emergence stands for a process leading to autonomous dynamics of structures ([Brodbeck, 1968], pags.280-303). We shall comment on this possibility in section 5, without really answering the question, but indicating how it could be taken into account in the framework of our models. The paper is organized as follows: in section 2, starting from the idea introduced by Izquierdo and co-workers [Izquierdo et al., 2009] we rigorously treat a class of ABM as Markov chains . Our main idea is to give a solid basis to the link from a micro to a macro description in the ABM context and fully explore the potential of this construction, a task to which sections 3 and 4 are devoted. Generalizations concerning different opinion representations as well as opinion models with other interaction mechanisms are then discussed in section 5. We find that our method may be an attractive alternative to mean-field approaches and this approach can provide new perspectives on the modeling of opinion exchange dynamics, and more generally of other ABM. We end up with some final remarks and a prospective for further work in section 6. 2. Microdynamics as a Markov chain Here we consider the class of ABM defined by a set N of agents, each one characterized by individual attributes that are taken in a finite list of possibilities. The meaning or the level of abstraction of the content of such attributes is not important as long as it can be codified in a finite, possibly very large, set of possibilities. The agents should also be able to regularly update their attributes according to the information conveyed from other agents as well as to their actual state. The collective updating process of the attributes of the agents at each time step consists of two parts. First a random choice of a subset of agents is made according to some probability distribution ω. The number of agents chosen at each time may also be random. Then the attributes of the agents are changed (updated) according to some rule, called a dynamical rule, which depends on the the subset of agents selected at this time. We denote by S the individual state or attribute space and we call the configuration space Σ the set of all possible combination of attributes of the agents, i.e. Σ = SN . It is noteworthy pointing out the meaning of the distribution ω in cases where an ABM is used to model human (or animal, biological, etc.) behavior. It should be thought as the idealized footprint of a collective structure, in the sense of constraints upon agent agency as well as enablers. See, for example, (see Ref. [Giddens, 1984] for a precise sense of structure as used in this context). Notice that, at this level, the dynamics of the model is defined in the configuration space, which seeks to describe the dynamics of each agent in full detail. We shall refer to this as micro dynamics. Let Σ be a finite set (ex. the configuration space of an ABM) and Z index a collection of maps {Fz, z ∈ Z}, Fz : Σ → Σ and ω a probability distribution on Z. If Fz1 , Fz2 , ... is a sequence of independent random maps, each having distribution ω, and X0 ∈ Σ has distribution µ0, then the sequence X0, X1, ... defined by (1) Xt = Fzt(Xt−1), t > 1 AGENT BASED MODELS AND OPINION DYNAMICS AS MARKOV CHAINS 5 is a Markov chain on Σ with transition matrix Pˆ : (2) Pˆ (x, y) = Prω(z ∈ Z, Fz(x) = y), x, y ∈ Σ Conversely ([Levin et al., 2009]), any Markov chain has a random map representation (RMR). There- fore (1) and (2) may be taken as an equivalent definition of a Markov chain which is particularly useful in our case, because it shows that an ABM that can be described as above is, from a mathematical point of view, a Markov chain and can be treated following the approach developed in this work. This class includes the models described in Ref. [Izquierdo et al., 2009]. In order to motivate and exemplify our point of view we introduce a model of opinion dynamics that is a particular case of the class of ABM described above. We shall come back to this model during the paper to illustrate our results and to show how they lead up to final conclusions in this particular case. To define the opinion model, let us consider a population N of N agents and denote the opinion, which is the single attribute of agent i at time t as xi(t) ∈ S, where we assume that each agent can choose out of δ different alternative opinions so that the agent state space S = {0, 1, . . . , δ − 1} has δ states. Let x(t) = {x1(t), . . . , xN (t)} describe the opinions of all the agents at time t. We refer to this as the opinion configuration or the opinion profile of the population. Then the configuration space of the model is Σ = SN, the space of all possible configurations x. In this very simple opinion model the willingness of two agents (i, j) to communicate depends on the similarity of their opinions. This can be encoded in form of a confidence matrix α : S×S → {0, 1} such that α(s1, s2) = 1 if the opinions s1 and s2 are sympathetic α(s1, s2) = 0 if they are not. 1 In the iteration process of this model, an agent pair (i, j) ∈ N×N is chosen at random ”to meet” according to a probability distribution ω, ex. ω is the uniform distribution, ω(i, j) = 1N2 , for all i, j. If two agents (i, j) meet and α(xi(t), xj(t)) = 1 then agent i imitates agent j, that is xi(t + 1) = xj(t), which brings us to define an updating function by u(xi, xj) = (xj , xj). If, instead, α(xi(t), xj(t)) = 0 the opinion configuration is not changed. Because in this version of the model the first chosen agent always imitates the second, the model is sometimes called a directed opinion model. In fact we treat a more general class of ABM with the following characteristics: (H1) There is a finite number N of agents. The set of all agents is denoted by N. Each agent is characterized by a single attribute which takes a value among δ possible alternatives. The set of δ elements of possible situations is denoted by S. The configuration space is the set Σ = SN of all possible combinations of the situations for the N agents. Therefore, if ~x ∈ Σ we write ~x = (x1, . . . , xi, . . . , xN ) with xi ∈ S. (H2) There is a δ× δ matrix α with entries 0 or 1 called the confidence matrix and an updating function denoted by u that is a function from S× S into S× S. (H3) The ABM is defined as a discrete time Random Walk in the configuration space Σ. If the walker is in a configuration ~x at time t, it will jump to the configuration ~y under the following prescription: (1) Two agents2 i and j are chosen according to a given probability distribution ω on N×N. 1The reason to call α the confidence matrix came from the fact that we can define this matrix by means of a confidence threshold, usually defined by means of a threshold on a distance on the set S of the possible opinions. The confidence matrix is defined, for any pair (x,y) of elements of S by α(x, y) = 0 if the relative confidence (x, y) is below threshold and α(x, y) = 1 if not. Notice that a confidence matrix is a generalization of the notion of confidence threshold. 2In some ABM the updating is made by choosing a number of agents different from 2, or even different at each time step. As is shown section 5, it is easy to generalize what follows in this case by just defining ω, α and u accordingly. 6 SVEN BANISCHA,D , RICARDO LIMAB,D AND TANYA ARAU´JOC,D (2) Compute α(xi, xj). If α(xi, xj) = 0 the walker doesn’t move. If α(xi, xj) = 1 then the walker moves to a configuration ~y = (x1, . . . , xi−1, yi, xi+1 . . . , xj−1, yj, xj+1, . . . , xN ) which defers from ~x only eventually in the value of the attributes of the agents i and j. That is: (yi, yj) = (xi, xj) if α(xi, xj) = 0 and (3) (yi, yj) = u(xi, xj) if α(xi, xj) = 1 Remark 2.1. The use of a confidence matrix α is just a matter of convenience. It would be possible to absorb α in u by forcing u(xi, xj) = (xi, xj) if α(xi, xj) = 0. We use this double encoding of the updating rule to follow the tradition in the field, assigning the updating rule u to ”the model” and the confidence matrix α to ”a parameter of the model”. As is clear from the previous discussion, under the hypotheses (H1), H(2), (H3) the ABM is an homogeneous Markov chain with state space Σ being the configuration space and a transition probability Pˆ (~x, ~y) as defined below. Notice that, according to the transition rule described above, the possible jumps are constrained to a ball of ”Hamming” radius 2 around the actual configuration. We describe now the transition probability matrix of the Markov chain according to Eq. (2). Let us say that a pair of configurations ~x and ~y are adjacent if all the agents have the same attribute values in x and in y except possibly the agents i and j, i.e. xk = yk if k 6= i and k 6= j. These are denoted ~x i,j ∼ ~y. Then we define a transition probability matrix Pˆ of a Markov chain by (4) if ~x i,j ∼ ~y and x 6= y then Pˆ (~x, ~y) = ∑ (xi,xj),i6=j, (yi,yj)=u(xi,xj) α(xi,xj)=1 ω(i, j) (5) Pˆ (~x, ~x) = 1− κ(~x) (6) Pˆ (~x, ~y) = 0 elsewhere, where (7) κ(~x) = ∑ ~y∼~x ∑ i6=j, (yi,yj)=u(xi,xj) α(xi,xj)=1 ω(i, j) Notice that the summation in (4) is needed because, in general, the updating function is not one to one in the configuration space so several links may join two given adjacent configurations. We shall see an example of such a situation in the opinion model. The transition probability matrix of a Markov chain is of dimension SN × SN and it describes the evolution of any initial distribution on the configuration (state) space. The comparison with a numerical simulation starting from some particular initial configuration may therefore be performed using the corresponding Dirac distribution. But, even in this case, the Markov analysis will spread AGENT BASED MODELS AND OPINION DYNAMICS AS MARKOV CHAINS 7 this initial concentrated distribution in the course of the updating process. Clearly it is possible to use other initial distributions for the Markov chain, and each distribution will correspond to a set of numerical simulations with different initial configurations chosen according to the distribution. Each row of the transition probability matrix has at most N2 non–zero elements (including a loop). This is due to the adjacency criteria, which encodes the fact that only a pair of agents may change their state from one step to the other. In fact, the non zero elements inside the row ~x are determined by the possible choices of couples xi, xj of components (agents) of ~x. These non–zero elements will appear in the columns corresponding to the ~y adjacent to ~x for which α(xi, xj) = 1. Despite the fact that all the information of the dynamics of the ABM is encoded in such a Markov chain, it is not always easy to learn directly from this fact, because of the over large dimension of the configuration space and its corresponding Markov transition matrix. As an example of a question that may be answered at this level, we mention the characterization of absorbing configurations. These are the ~x = (x1, . . . , xi, . . . , xN ) such that, for any (xi, xj), α(xi, xj) = 0 or u(xi, xj) = (xi, xj) and they are easy to identify even in the case of bounded confidence models. It is clear that the properties of the transient dynamics are most relevant for Markov chains with absorbing configurations. The analytical study of these properties is based upon the corresponding fundamental matrix [Kemeny and Snell, 1976]. But such computation needs to invert a matrix of order | SN | that can be performed only numerically. Therefore another strategy is lacking to go further in this direction. In the next section we shall present one possibility to overcome this difficulty. As already noticed, the directed opinion model is a special case of such a formalism. There, only one coordinate of the configuration may change at each step. The transition probability matrix Pˆ is obtained from (4), (5), (6) and(7) by restricting the corresponding sums to the first index i only. One immediate consequence of the topology of this transition matrix is that in the opinion model the only absorbing configurations are complete consensus (all the agents having the same opinion) or mutually antagonistic (agents having opinions s and s ′ ) for which α(s, s ′ ) = 0 for all pairs (s, s ′ )). Recall that, with probability one, the system falls in one of the absorbing states in finite (although not uniform) time. Therefore we see how in this model the lack of confidence allows for new absorbing states, stabilizing non–consensual opinion profiles. 3. Macrodynamics, Projected Systems and Observables. A projection of a Markov chain with state space Σ is defined by a new state space X and a (pro- jection) map Π from Σ to X. The meaning of the projection Π is to lump sets of micro configurations in Σ accordingly to some macro property in such a way that, for each X ∈ X, all the configurations of Σ in Π−1(X) share the same property. In fact such projections are important when catching the ”macroscopic” properties of the corre- sponding ABM because they are in complete correspondence with a classification based on an ob- servable property of the system. To see how this correspondence works let us suppose that we are interested in some factual property of our agent based system. This means that we are able to assign to each configuration the specific value of its corresponding property. Regardless of the kind of value used to specify the property(qualitative or quantitative), the set X needed to describe the configurations with respect to the given property is a finite set, because the set of all configurations is also finite. Let then φ : Σ → X be the function that assigns to any configuration x ∈ Σ the corresponding value of the considered property. It is natural to call such φ an observable of the system. Now, any observable of the system naturally defines a projection Π by lumping the set of all the configurations with the same φ value. Conversely any (projection) map Π from Σ to X defines an observable φ with values 8 SVEN BANISCHA,D , RICARDO LIMAB,D AND TANYA ARAU´JOC,D in the image set X. Therefore these two ways of describing the construction of a macrodynamics are equivalent and the choice of one or the other point of view is just a matter of taste. The price to pay in passing from the micro to the macrodynamics in this sense ([Kemeny and Snell, 1976], [Chazottes and Ugalde, 2003]) is that the projected system is, in general, no longer a Markov chain: long memory (even infinite) may appear in the projected system. Given the transition probability and the initial distribution defining the first Markov chain in Σ, we are interested in the projected measure µ defined for all cylinders [X(1), X(2), . . . , X(r)] of X by: (8) µ[X(1), X(2), . . . , X(r)] = µˆΠ −1[X(1), X(2), . . . , X(r)] where µˆ denotes the corresponding probability for the initial Markov chain. The conditions for a projection of a Markov chain still to be a Markov chain are known as lumpa- bility (or strong lumpability), and necessary and sufficient conditions for lumpability are known [Kemeny and Snell, 1976]. In general it may happen that, for a given Markov chain, some projec- tions are Markov and others not. Therefore a judicious choice of the macro properties to be studied may help the analysis. In order to establish the lumpability in the cases of interest we shall use symmetries of the model. For further convenience, we state a result for which the proof is easily given Thm. 6.3.2 of [Kemeny and Snell, 1976]: Proposition 3.1. Let (Σ, Pˆ)) be a Markov chain and (X1, . . . , Xn) a partition of Σ. Suppose that there exists a set Λ of bijections of Σ (therefore a group of symmetries ) such that: (1) Λ preserves the partition: for any λ ∈ Λ and any atom Xj, we have λXj ⊆ Xj. (2) Λ acts transitively on each Xj : Xj = ⋃ λ λx, for some (and then all) x ∈ Xj. (3) The Markov transition probability Pˆ is symmetric with respect to Λ: (9) Pˆ (x, y) = Pˆ (λx, λy) for anyλ ∈ Λ then the partition (X1, . . . , Xn) is (strongly) lumpable. The opinion model is a nice example where such a projection construction is particularly meaningful. There, we consider the projection Π that maps each ~x ∈ Σ into X<k0,...,kδ−1> ∈ X where ks, s = 1, . . . , δ, is the number of agents in ~x with opinion s. The projected configuration space is then made of the X<k0,...,kδ−1> where ks > 0, s = 1, . . . , δ − 1 and ∑δ−1 0 ks = N . 4. Opinion Dynamics and Projected Systems We shall now treat in detail the opinion model as an example of the previous ideas. AGENT BASED MODELS AND OPINION DYNAMICS AS MARKOV CHAINS 9 4.1. The Macro Dynamics of Binary Opinion Model. The case of a binary opinion model, δ = 2, is particularly simple and therefore well-suited for an analytical starting point. In this case bounded confidence is excluded. In binary state opinion models, the opinion of agent i at time t is a binary variable xi(t) ∈ {0, 1}. The opinion profile is given by the bit–string x(t) = {x1(t), . . . , xN (t)}. The space of all possible configurations is Σ = {0, 1} N . Let us define a function N1 on the configuration space Σ such that (10) N1(x) = N∑ i=1 xi, ∀x ∈ Σ. It counts the number of agents in state 1. Using N1(x), we define Xk ⊂ Σ by (11) Xk = {x : N1(x) = k} . Each Xk ⊂ X, k = 0 . . .N contains all the configurations (x) in which exactly k agents hold opinion 1 (and then N − k hold opinion 0). In this way we obtain a partition of the configuration space Σ. Notice that X0 and XN contain only one configuration, namely X0 = { ~0 } and XN = { ~1 } . Using the group GN of all the permutations of N agents, it is clear that such a partition fulfills conditions (1) and (2) of Proposition(3.1). So lumpability of this partition leans on condition (3) of Proposition(3.1): the invariance of the Markov transition matrix Pˆ under the permutation group of agents. Notice that no restriction on the confidence matrix is needed for it only depends on the opinions and not on the labeling of the agents. In fact, the probability distribution ω must be invariant under the permutation group GN and therefore uniform: ω(i, j) = 1 N2 , for all pair of agents (i, j). It is worthwhile noticing at this point that the uniform distribution, corresponding to the most unstructured dynamical rule, still entails emergent organized patterns in the system of opinions. Because the set of opinions is dynamically organized, the homogeneity of the uniform distribution on the agent population has an implicit structure when viewed through the opinion content. Moreover, for some other distributions ω, it may be possible to refine the partition so as to get lumpability. For instance, if the agents are divided in subsets in which ω is constant, then the partition defined by an equal number of opinions inside each subclass is lumpable. In this case α will depend on the pair labeling of agents together with their respective opinions and not only on the latter. The block structure of α then determines the projection scheme. For the model with complete confidence, α(s, s ′ ) = 1 for any (s, s ′ ), and uniform distribution ω, the Markov chain is defined by the stochastic transition matrix: 10 SVEN BANISCHA,D , RICARDO LIMAB,D AND TANYA ARAU´JOC,D (12) P =   1 0 0 0 0 . . . 0 p(1) q(1) p(1) 0 0 . . . 0 0 p(2) q(2) p(2) 0 . . . 0 ... . . . . . . . . . ... 0 p(k) q(k) p(k) 0 ... . . . . . . . . . ... 0 . . . 0 p(N − 2) q(N − 2) p(N − 2) 0 0 . . . 0 0 p(N − 1) q(N − 1) p(N − 1) 0 . . . 0 0 0 0 1   , with p(k) = k(N − k) N2 .(13) and q(k) = 1− 2p(k) = k2 + (N − k)2 N2 .(14) Formulas (13) and(14) follow from Thm. 6.3.2 of [Kemeny and Snell, 1976] and the fact that for any micro–configuration in Xk there are k(N − k) possible meetings taking it to Xk+1 and the same number of possible encounters taking it to Xk−1. Notice that in this case X0 and XN are the only absorbing states of the process. The probability that any opinion change happens in the system is 2p(k) and then depends on the current opinion balance. But there is no general tendency of the system to be attracted by one of the extremes. Due to the particular form of p(k) the prevalence of one opinion results in a reduced probability of further opinion change, contrary to the usual random walk with constant transition probabilities. For k ∼= N2 we have p(k) ∼= 14 . By contrast, when k is closed to 0 or N , there is a large probability for the system to stay unchanged. Notice that for k = 1 or k = N − 1 this probability tends to 1 when N → ∞. This indicates that in this model once one opinion dominates over the other, public opinion as a whole becomes less dynamic, which also reveals a difficulty for new opinions to spread in the artificial society. 4.2. Transient in the Macro Dynamics of Binary Opinion Model. In Markov chains with absorbing states (and therefore in ABM) the asymptotic status is quite trivial. As a result, it is the understanding of the transient that becomes the interesting issue. We shall now analyze the transient dynamics for the macro dynamics of the binary opinion model. In order to do so, all that is needed is to compute the fundamental matrix F of the Markov chain ([Kemeny and Snell, 1976, Behrends, 2000]). Let us express P in its standard form in which the two first rows and columns stand for the absorbing states X0 and XN and the remaining for the N − 1 transient states: (15) P = ( 1 | 0 R | Q ) . AGENT BASED MODELS AND OPINION DYNAMICS AS MARKOV CHAINS 11 Here Q is the (N − 1)× (N − 1) matrix corresponding to the transient states (without the first two rows and columns associated with X0 and XN ). The fundamental matrix F is the inverse of (1−Q) where 1 is the (N − 1)× (N − 1) identity matrix. Due to the structure of P , (1−Q) is a tridiagonal matrix that can be inverted easily using for instance the tridiagonal matrix algorithm (also known as Thomas algorithm [Conte and Boor, 1980]). We get: Fij = N(N − i) N − j : i > j(16) and Fij = Ni j : i 6 j(17) Equations (16), (17) provide us with the fundamental matrix of the system for an arbitrary number of agents N , giving information about mean quantities of the transient dynamics in this model. The corresponding matrixG that encodes information about the variance [Kemeny and Snell, 1976] of the same quantities reads: Gij = (2N 2 −N) (N − i) (N − j) −N2 (N − i)2 (N − j)2 : i > j(18) Gii = N(N − 1)(19) and Gij = (2N 2 −N) i j −N2 i2 j2 : i < j(20) An interesting quantity to characterize opinion dynamics is the time a process starting in Xk takes to end in one of the two consensual absorbing states. Defining τk and υk as the mean and the variance of the random variable for k = 1, . . . , N − 1 we got from (16, 17) and [Kemeny and Snell, 1976]: (21) τk = N  k−1∑ j=1 (N − k) (N − j) + 1 + N−1∑ j=k+1 k j   and the corresponding expression for υ can explicitly be written from (18, 19, 20) using: (22) υ = (2F− 1)τ − τsq where τsq denotes the vector resulting from τ by squaring each entry. Therefore 12 SVEN BANISCHA,D , RICARDO LIMAB,D AND TANYA ARAU´JOC,D υk = 2N 2(N − k)  k−1∑ i=1 1 (N − i)  i−1∑ j=1 (N − i) (N − j) + 1 + N−1∑ j=i+1 i j    +(23) +(2N − 1)N  k−1∑ j=1 (N − k) (N − j) + 1 + N−1∑ j=k+1 k j  + +2N2k  N−1∑ i=1 1 k + i  k+i−1∑ j=1 (N − k − i) (N − j) + 1 + N−1∑ j=k+i+1 k + i j  −  − −N2  k−1∑ j=1 (N − k) N − j + 1 + N−1∑ j=k+1 k j   2 For a system of 1000 agents, Fig. 1 shows the mean times until absorption τk from each Xk and Fig. 2 the corresponding variances υk. Notice the contrast among the two scales showing how the variance is large compared with the mean. 0 200 400 600 800 1000 0 100 000 200 000 300 000 400 000 500 000 600 000 700 000 k Τ Figure 1. Mean time τk until absorption as a function of the initial configuration k for N = 1000. There are interesting consequences of (21) and (23), in cases where the number of agents (N) becomes large. First, as already pointed out, we see that the ratio between the variance and the mean is quite large and in fact it diverges with N . Hence, the means are fairly unreliable estimates in this system. This is often the case for absorbing Markov chains [Kemeny and Snell, 1976] making a direct interpretation of numerical simulations for this type of models tough. Even more subtle, the time scale depends significantly on the starting configuration k. In fact τk scales as N logN for k = 1 and k = N − 1 but as N2 for k = N2 . We are therefore faced with a situation where to take the limit of asymptotic times first and then large number of agents or to do it in the reverse order is not equivalent. In other words, for a finite, even large, number of agents, there is a probability 1 of reaching one of the consensual configurations in finite time. By contrast, in the limit of an infinite number of agents this probability is 0 and the process will stay essentially in the configurations close to parity, k = N2 . Together with the presence of large fluctuations revealed in (23) this fact is the imprint of a (dynamical) phase transition. AGENT BASED MODELS AND OPINION DYNAMICS AS MARKOV CHAINS 13 0 200 400 600 800 1000 0 5.0´ 1010 1.0´ 1011 1.5´ 1011 2.0´ 1011 2.5´ 1011 k Τ 2 Figure 2. Variance υk until absorption as a function of the initial configuration Xk for N = 1000. Besides this analysis of the scaling law of the dynamics for large N , it is also interesting to have an insight into the distributions of absorbing times for a system of fixed number of agents, the second item mentioned above. As known by the Perron–Frobenius Theorem [Seneta, 2006] this distribution is exponential for large t with rate (1 − λmax), λmax being the maximal eigenvalue of the matrix Q. However, the correction to this distribution for intermediate times depends on the initial configuration. Indeed in our case, the distribution of the times taken by the process to fall into one of the consensual configurations departs from the exponential in a way that is strongly dependent upon the initial state, as shown in Figs. 3 and 4. 0 5000 10000 15000 200000 0.2 0.4 0.6 0.8 1 tabs cd f(ta bs ) k = 50 k = 24 k = 1 Figure 3. Cumulative probability of being absorbed after time tabs (r.h.s.) for N = 100 and three starting configurations k = 1 (green), k = 24 (blue) and k = 50 (red). Vertical lines show the respective expected absorbing times τ . The computation of the full time distribution is based on the fact that the powers Qt of Q contain all the information about the probability that the process is still not absorbed after t steps. To be 14 SVEN BANISCHA,D , RICARDO LIMAB,D AND TANYA ARAU´JOC,D 0 5000 10000 15000 200000 0.5 1 1.5 2 2.5 3x 10 −3 tabs P( tab s ) k = 50 k = 24 k = 1 0.003 e−(1−λ max) t 0.0022 e−(1−λ max)t Figure 4. Probability of absorbency at time tabs for N = 100 and three starting configurations k = 1 (green), k = 24 (blue) and k = 50 (red). Exponential functions (dashed) are shown to illustrate the exponential decay of the convergence times. precise, the sum over the kth row of Qt equals the probability that the process starting at Xk is not absorbed after t iterations. This yields the cumulative distribution function shown in Fig. 3 for a system of 100 agents and three starting configurations k = 1 (green), k = 24 (blue) and k = 50 (red). The vertical dashed lines represent the respective mean values τ obtained using Eq.21. For k = 50 it becomes clear that around 60% of simulation runs are absorbed until the expected absorption time is reached. Fig. 4 shows the probability that the process is absorbed exactly at time tabs. The three solid curves represent the respective probabilities for k = 1, 24, 50. The dashed curves are exponential functions that fit the distributions for large tabs showing that the distributions decay with (1−λmax) as claimed above. This leads to an interesting feature of the distribution of the absorption times coming from the fact that λmax tends to one when N →∞. More precisely [Seneta, 2006] (12) implies (24) 1 > λmax > 1− p(1) > N − 1 N . As a consequence, we see that the times for the system to get absorbed in the final states diverge with N , and Q approaches a stochastic matrix. In fact in the limit of infinite N consensus cannot be reached. This is not the only reason why the dynamics inside the transient configurations is so important. In fact we might speculate that, in a more realistic description, exogenous events may interfere with the system and reset it from time to time, and then, in view of the previous analysis, even when the number of agents is finite but sufficiently large, the system will similarly never fall into a final absorbing unanimity configuration. Notice that (16, 17) and (18, 19, 20) can be used to gain new insight into the dynamics inside the transient. Fi,k is the mean of the time the process is in the transient configuration Xk when started in the configuration Xi and Gi,k is the corresponding variance. Figs. 5 and 6 show a quite different behavior depending on the initial situation. Starting from Xi close to X1 or XN−1 – the strongly ”biased” configurations – the residence mean times in Xk naturally decrease with the distance from i but become almost independent of k and N for k large whereas the corresponding variance diverges AGENT BASED MODELS AND OPINION DYNAMICS AS MARKOV CHAINS 15 with N . Instead, starting from Xi close to XN/2, the quasi-homogeneous configurations- the residence mean times and variance in Xk always diverge. 0 20 40 60 80 100 k 20 40 60 80 100 F1,k 0 20 40 60 80 100 k 20 40 60 80 100 F24,k 0 20 40 60 80 100 k 20 40 60 80 100 F50,k Figure 5. The mean times for the process in a configuration Xk before absorption for a walk starting in X1, X24 and X50 as function of k for N = 100. 0 20 40 60 80 100 k 2000 4000 6000 8000 10 000 G1,k 0 20 40 60 80 100 k 2000 4000 6000 8000 10 000 G24,k 0 20 40 60 80 100 k 2000 4000 6000 8000 10 000 G50,k Figure 6. The variance in the number of times a realization starting in X1, X24 and X50 is in Xk before absorption as function of k for N = 100. Notice the scale as compared with Fig. 5 The reason for such ”strange” behavior is quite clear: asN becomes large, almost all the realizations are trapped during very large times close to their initial configuration, see (12), and only very few realizations reach the opposite configurations but staying there for large times. That is, a complete overturn of the opinions is very rare but, when happened, the new situation naturally becomes as stable as the previous. Therefore we are in a case where there is almost no realization behaving as the mean. On the other hand, starting from Xi closed to XN/2, the ”homogeneous” configurations, the mean times in Xk also decrease with the distance from N/2, but now the mean times all scale linearly with N and the variances with N2. Surprisingly these two behaviors, almost static on the border and very unstable ”back-and-forth” on the center, compensate perfectly to end up in the same mean residence times and variance (the diagonals of F and G) for all the initial configurations. The same compensation appears when we compare the probabilities for a walk stating in Xi to return in Xi, which is independent of i and almost sure for large N : (25) lim t→∞ p(t)(Xi, Xi) = Fii − 1 Fii = N − 1 N . Finally the probabilities for a process starting in Xi to end up in X0 or XN can be computed using also (16, 17). The result is as expected: (26) lim t→∞ p(t)(Xi, X0) = N − i N 16 SVEN BANISCHA,D , RICARDO LIMAB,D AND TANYA ARAU´JOC,D and (27) lim t→∞ p(t)(Xi, XN ) = i N . It is reasonable to hypothesize a correlation, if not a causal link, between fast changes in the agent opinion induced by the social process, here stylized in the dynamical rules, and the inconsistency experienced by agents between the micro and the macro level, described in section 1. This conflict is referred to as practical emergence. It consists of a gradual separation of the individual mental patterns from the reality. The agent is then faced with a representation that is not always perfectly in keeping with the situation ([Giesen, 1987], pag.342). In the opinion model, a possible rating of this practical emergence inconsistency is the mean time the macro process takes to change of state. Indeed any change of state in this process corresponds to a change for a opinion of an agent . Therefore the faster this rate, the smaller the switching mean time, and the more likely is the emergence of a practical disruption between picture and reality from the agent’s point of view.. From (13) and Ref. [Kemeny and Snell, 1976], Thm. 3.5.6, the mean time ηk that the process remains in state Xk once the state is entered (including the entering step) is: ηk = N2 2k(N − k) .(28) Therefore, ηk is of order N 2 for k close to (but smaller than) N and 2 for k close to N 2 . Again, for N large the process will be almost stationary in presence of a large majority supporting one of the opinions but extremely unstable when no opinion is clearly predominant. In the latter case practical emergence is plausible. We suggest correlating small values of ηk with this phenomenon. 0 500 1000 1500 2000 t0 20 40 60 80 100 N1 Figure 7. Different realizations of simulations with 24 out of 100 agents in initial state ’1’ (i.e a process starting in X24). Markov chain analysis shows that with probability 0.95 the process is in the shaded region. To conclude this section Fig. 7 shows different realizations of the agent simulation along with the expected evolution in form of a confidence interval. The measure of the realizations inside a given confidence interval is an increasing function of time. However, since any individual realization may cross the border of this interval several times before falling in one of the final absorbing states a numerical evaluation of the convergence times may be quite delicate. AGENT BASED MODELS AND OPINION DYNAMICS AS MARKOV CHAINS 17 4.3. The Macro Dynamics of a General Opinion Model. For an opinion model with δ different opinions, the opinion of any agent i at time t is a variable xi(t) ∈ {0, . . . , δ − 1}. The opinion profile is given by the vector x(t) = {x1(t), . . . , xN (t)}. The space of all possible configurations is then Σ = {0, . . . , δ − 1}N . Following the same argument as for δ = 2, we define Ns(x) to be the number of agents in the configuration x with opinion s, s = {0, . . . , δ − 1}, and then X<k0,k1,...,kδ−1> ⊂ Σ as (29) X<k0,...,ks,...,kδ1> = { x ∈ Σ : N0(x) = k0, . . . , Ns(x) = ks, . . . , Nδ−1(x) = kδ−1 and δ−1∑ s=0 ks = N } . Each X<k0,k1,...,kδ−1> contains all the configurations x in which exactly ks agents hold opinion s for any s. As in the binary case, in this way we obtain a partition of the configuration space Σ. It is clear that also in this case the group of all the permutations of N agents’ labeling fulfills con- ditions (1) and (2) of Proposition(3.1) and that condition (3) is verified if the probability distribution ω is permutation invariant and therefore uniform: ω(i, j) = 1N2 , for all pair of agents (i, j). In this case, Eq. (13) generalizes to: (30) P (X<k0,k1,...,kδ−1>, X<k′0,k′1,...,k′δ−1>) = kskr N2 if k′s = ks ± 1 and k ′ r = kr ∓ 1 whereas k ′ j = kj for all other j, and the probability that no opinion changes, Eq. (14), becomes P (X<k0,k1,...,kδ−1>, X<k0,k1,...,kδ−1>) = 1 N2 δ−1∑ s=0 (ks) 2 .(31) The structure of (30) has an interesting consequence on the dynamics of the system. We see that, if one j for which kj = 0, the probability of transition to a state with kj = 1 is 0. In other words, to change the number of agents sharing opinion j, at least one agent with such an opinion is needed. Therefore, the state space is organized as a δ − simplex with absorbing faces ordered by inclusion, corresponding to increasing sets of opinions with no supporters. Starting in some state with no null kj the process will finish at certain time in a state where, for the first time, kj = 0 for some j (notice that only one j at each time can fall to zero since the sum of all kj is constant). From there, the given kj will stay equal to zero for ever, and (30 – 31) tell us that the transition probabilities are now those of a system with δ− 1 opinions. Because the condition∑δ−1 s=0 ks = N is to be fulfilled by the remaining opinions, the system will then evolve exactly as if the N agents share δ − 1 opinions from the very beginning. After a certain time a new opinion will lose all its supporters and the system is now equivalent to a full system of δ − 2 opinions, and so on. The system will cascade up to the final absorbing state, with only one opinion shared by all the N agents. We recall that each of such cascade transitions is achieved in finite (random) times. By computing the fundamental matrix of the subsystems it would be possible to access the mean and variance of the times the system evolves between two successive extinctions of group opinions. We conjecture the same scaling laws for a system of δ opinions as the ones already described for δ = 2. 18 SVEN BANISCHA,D , RICARDO LIMAB,D AND TANYA ARAU´JOC,D 4.4. The Macro Dynamics, Further Reduction. Alternatively, we can make use of the symmetries in the structure of (30) and search for lumpable partitions to further reduce the problem. This can be done by considering the model from the perspective of a single ”party” associated with (say) opinion 0. For that ”party”, it may be important to know how many agents are supportive because they share the same opinion, and how many are not because they support one of the remaining opinions. Thus, we reduce the model to a quasi–binary variant with the supporter opinion 0 on one side and and all other opinions (1∪· · ·∪ δ − 1) on the other side, grouping together all the states with k0 = r, r = 0, . . . , N . The corresponding partition reads: (32) Y 0r = ⋃ k1,...,kδ−1 k0=r X〈r,k1,...,kδ−1〉, r = 0, . . . , N. It is easy to verify that the chain (on the X) is indeed lumpable with respect to Y and that (33) P (Y 0r , Y 0 r+1) = P (Y 0 r , Y 0 r−1) = r(N − r) N2 . It thus turns out that the chain formed by the Y 0r , r = 0, 1, . . . , N is exactly the same as the chain derived for the binary model. Therefore, the questions regarding the evolution of one opinion in relation to all the others taken together are addressed by the transient analysis performed in Sec. 4.2. That is to say, from this point of view, each ”party” may rely on the dynamics of a binary model as a coarse description of the evolution of its own status. There is however an important subtlety when doing such an analysis. The asymmetry of the partition one-against-all-others will be encoded in the initial condition. For instance, starting with an equally distributed profile of N agents corresponds to the initial condition X<k,k,...,k> in the detailed description but to Y 0N/δ in the coarse case. In such a way the asymmetry in the one-against-all-others description is recovered. Another important issue concerns the effects of bounded confidence in the model, in other words if a certain number of pairs of opinions do not communicate. From a formal point of view bounded confidence is encoded in the confidence matrix α just by putting α(a, b) = 0 if (a, b) is one of such non–communicating opinion pair, denoted to as a = b. The consequence of bounded confidence is the emergence of non–consensual absorbing states known as opinion clusters. In the following section, we treat in great detail the simplest case where bounded confidence is possible, namely δ = 3. We postpone the general case to the last section since it is a simple generalization of this example. 4.5. The Macro Dynamics of a Three Opinions Model and the Emergence of Opinion Clustering. We are particularly interested in the δ = 3 case because it is the simplest version in which one can meaningfully consider bounded confidence effects. According to the general results of Sec. 4.3 in case of unbounded confidence, the projection from micro to macro dynamics is lumpable (under the homogeneous hypothesis on ω of course).The Markov chain topology obtained by this projection is shown in Fig. 8 along with the transition structure. The probabilities of the transitions are given by Eqs. (30) and (31) which allows us to compute the complete transition matrix P . For the construction of P , the nodes in the Markov chain are labeled in increasing order from the absorbing to the central nodes, see Fig. 8: labels 1 to 3 (black) for absorbing consensus states, labels 4 to 24 (blue) for two–opinion states, labels 25 to 39 (red) for three-opinion states with one of the opinion supporters reduced to one element, and labels 40 to 45 (red) for the remainder states. It AGENT BASED MODELS AND OPINION DYNAMICS AS MARKOV CHAINS 19 k = 0 l = 0 k = 1 k = 2 k = 3 k = 4 k = 5 k = 6 k = 7 k = 8 l = 1 l = 2 l = 3 l = 4 l = 5 l = 6 l = 7 l = 8 m = 5 m = 8 m = 7 m = 6 m = 4 m = 3 m = 2 m = 1 m = 0 k-1 l+1 m a → b c → a l = const. k = c o n st .m = c o n st. k+1 l-1 m b → a k+1 l m-1 k l m k-1 l m+1 a → c k l+1 m-1 k l-1 m+1 b → c c → b 1 3 24 5 6 7 8 9 10 11 12 13 14 15 16 1718 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 Figure 8. Transition structure (l.h.s) and state topology (r.h.s) of the unbounded confidence model with three opinions {a, b, c} , here N = 8. is possible to compute the fundamental matrix, at least numerically if N is large, and this makes it possible to compute the significant statistical indicators of the model. For instance, if N = 8, the state space of the macro dynamics has 45 states and the mean times for the transient nodes to reach an absorbing state (consensus) range between 21 and 48 time steps, see Fig. 12. Not surprisingly the mean transition times are a function of the distance to the absorbing states as measured on the graph of the state space (Fig. 8). From the fundamental matrix F it is also easy to compute the probabilities of ending up in each of the absorbing (consensus) states starting from any transient node using the matrix B = FR, where R is defined in (15) . For instance, for N = 8, the absorbing probabilities for any state are represented in Fig. 9 Let’s now turn to the question of what happens if agents with a certain opinion do not accept to change their opinion after meeting an agent of another given opinion. In the opinion dynamics literature, this is referred to as bounded confidence. From the Markov chain perspective the emergence of opinion polarization becomes a simple consequence of the restrictions posed on the interaction process. As certain transitions are excluded, the state space topology of the Markov chain changes in a way that new absorbing states become present. The respective states correspond to non–consensus configurations, hence, they represent a population with opinion clustering. As an example, let us assume that agents in opinion state ’a’ are not willing to communicate with agents in state ’c’ and vice versa, that is to say α(a, c) = α(c, a) = 0. The corresponding Markov transition matrix P now reads : (34) P (X<k,l,m>, X<k−1,l,m+1>) = P (X<k,l,m>, X<k+1,l,m−1>) = 0. 20 SVEN BANISCHA,D , RICARDO LIMAB,D AND TANYA ARAU´JOC,D 1 2 3 4 5 6 7 8 9 101112131415161718192021222324252627282930313233343536373839404142434445 0 0.2 0.4 0.6 0.8 1 X <k,l,m> P( X −> X a bs ) P(X <k,l,m> −> X<0,0,N>) P(X <k,l,m> −> X<N,0,0>) P(X <k,l,m> −> X<0,N,0>) Figure 9. The probabilities of reaching the three absorbing states for all initial nodes X<k,l,m>. Notice that all three final states can be reached only from the inner nodes (numbers 25 to 45). and (35) P (X<k,l,m>, X<k,l,m>) = ( k2 + l2 +m2 N2 ) + 2 ( km N2 ) . The remaining entries are, as before, (30) and (31). The resulting state space topology is shown in Fig. 10, where all horizontal transition paths are removed, since those paths correspond to the a↔ c opinion changes. k = 0 l = 0 k = 1 k = 2 k = 3 k = 4 k = 5 k = 6 k = 7 k = 8 l = 1 l = 2 l = 3 l = 4 l = 5 l = 6 l = 7 l = 8 m = 5 m = 8 m = 7 m = 6 m = 4 m = 3 m = 2 m = 1 m = 0 k-1 l+1 m a → b c → a l = const. k = c o n st .m = c o n st. k+1 l-1 m b → a k+1 l m-1 k l m k-1 l m+1 a → c k l+1 m-1 k l-1 m+1 b → c c → b 1 3 24 5 6 7 8 9 10 11 12 13 14 15 16 1718 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 Figure 10. Transition structure and state topology of the bounded confidence model for N = 8. AGENT BASED MODELS AND OPINION DYNAMICS AS MARKOV CHAINS 21 For the set of bordering nodes X<k,0,N−k> : k = 1, . . . , N − 1 there is no longer any transition that leads away from them, so that all these nodes become absorbing states. The fact that these additional absorbing states X<k,0,N−k> represent opinion configurations with k agents in state a and N − k agents in state c explains why the introduction of interaction restrictions leads to possible final states with opinion polarization. It is noteworthy, however, that the opinion clustering would not be observed if only one of the two transitions, a→ c or c → a, were excluded. In this case, there would still be a path leading away from the bordering nodes to one of the nodes (X<0,0,N> or X<N,0,0>) in the corner of the graph. Such a set–up corresponds to an asymmetric model where the bordering atoms X<k,0,N−k> : k = 1, . . . , N − 1 become again transient, such that the process eventually leads to the final consensus configurations as previously described. However the final configuration x = {~c} would be much more likely than x = {~a}, as a consequence of the asymmetry of such a model variant. As for the case of unbounded confidence, the fundamental matrix can be computed here as well allows us to calculate the statistical quantities of the model such as absorbing probabilities and times. In Fig.11 the probabilities of a realization starting in one of the transient states ending up in each of the absorbing final states are shown for each initial node (computed again by B = FR). If the process is in the first 10 nodes at t = 0, it will remain there forever as all these nodes are absorbing in the bounded confidence case. Notice that nothing changes for the nodes 11 to 24 with respect to the unbounded case shown in Fig.9. For a system in these configurations the communication constraint has no effect on the dynamics. The six absorbing non–consensus states ( numbers 4 to 10 with only ”a” and ”c” opinion supporters) are reachable only from the inner nodes, that is only if all opinions are present initially. It becomes clear that for some of these configurations, the probability of converging to consensus becomes very small (e.g. nodes 25 to 30). 1 2 3 4 5 6 7 8 9 101112131415161718192021222324252627282930313233343536373839404142434445 0 0.2 0.4 0.6 0.8 1 X <k,l,m> P( X −> X a bs ) P(X <k,l,m> −> X<0,0,N>) P(X <k,l,m> −> X<N,0,0>) P(X <k,l,m> −> X<0,N,0>) P(X <k,l,m> −> X<k,0,N−k>) Figure 11. The probabilities for all initial nodes X<k,l,m> converging to opinion clustering or to the three consensus nodes. Notice again that all final states and the non–consensus states in particular can be reached only from the inner nodes (numbers 25 to 45). Finally, we can compare the mean time before a realization starting in a transient state remains in the transient before absorption for the bounded and the unbounded case. This statistical indicator is represented in Fig. 12. Notice that the times for the states 1 to 3 (unbounded) and 1 to 10 (bounded) are zero as in this case the process is absorbed from the very beginning. Again, the non–absorbing two–opinion states (11 to 24) are not affected. As in the general case of any δ we can search here for lumpable partitions to further reduce the problem taking the point of view of each ”party” associated with opinions ”a”, ”b” or ”c”. For the case of unbounded confidence we have shown in Sec. 4.4 that the dynamics from any of these points of view reduces to the δ = 2 case. The status of the bounded confidence model is different. From the 22 SVEN BANISCHA,D , RICARDO LIMAB,D AND TANYA ARAU´JOC,D 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 0 5 10 15 20 25 30 35 40 45 50 X <k,l,m> τ Bounded Confidence Unbounded Confidence Figure 12. Mean times for the transient nodes to reach an absorbing state. Blue bars: unbounded confidence, red bars: bounded confidence with a 6↔ c. Labels of the nodes are explained in the text. perspective of opinion ”b” the partition in ”supporters” and ”opponents” is lumpable, therefore, the system evolves as a binary chain. This is not the case from the perspectives of opinions ”a” or ”c”. For instance, from the point of view of opinion ”a”, the corresponding partition reads: (36) Y ar = ⋃ l+m=N−r X〈r,l,m〉, r = 0, 1, . . . , N. and (37) P (X〈r,l,m〉, Y a r+1) = rl N2 . It turns out that the chain formed by the Y ar , r = 0, 1, . . . , N is not a Markov chain since the r.h.s. of (37) depends on l and not only on r [Kemeny and Snell, 1976]. We see that the introduction of bounded confidence in this model leads to memory effects due to the fact that an agent switching from opinion ”a” to opinion ”c” necessarily goes through a visit to opinion ”b” for at least one time step, therefore, the probability of this transfer will depend on the number of supporters of opinion ”b” at that time. 5. Simple Generalizations We first mention an easy generalization of the existence of absorbing states for the case of bounded confidence in a model with any number δ of different opinions. In order to get non consensual absorbing states it is necessary and sufficient that a subset of opinions is mutually incommunicable. In this case all the states belonging to the simplex generated by the mutually incommunicable opinions become absorbing. It is worthwhile noticing that absorbing states may appear in different clusters of simplexes provided that the corresponding opinions are related by chains of communicating links. An example of this type appears for δ = 3 if (a= b) and (a= c) but (b↔ c) where the absorbing states are either the simplex with only a and b or with only a and c opinions. AGENT BASED MODELS AND OPINION DYNAMICS AS MARKOV CHAINS 23 Another interesting issue concerns agent models with vectorial (or equivalently matrix or table) individual state (attribute) space. Suppose that at each time step each i is characterized by a list of n attributes, where the first attribute may take n1 possible values, · · · , and the n th attribute nn possible values. The corresponding ABM can then be easily built as in Sec. 4.3 by taking δ = n1×n2×· · ·×nn. And, as long as one is interested in following the macrodynamics of the agents who all have δ attributes that are identical,, the reduction proposed in Sec. 4.4 also applies. Therefore, absorbing non consensual states will appear in exactly the same way as described above as a consequence of bounded confidence. For this vectorial opinion model there is, however, an unexpected subtlety when we are interested in the macrodynamics of the agents ranked by only one of their attributes, for instance if the agents are separated in n1 different groups according to the number of agents sharing their first attribute. Then the partition is no longer lumpable, and therefore the evolution of the correspondent random variables (for instance, the number of elements of each group) is not a Markov chain. Again, in this case, new memory effects may appear from this choice of aggregation to build the macrodynamics. The proof can be done as in (36) and (37). We shall finish this section by noticing a trick that makes it possible to extend the previous analysis to systems where the agents are defined on a lattice or, more generally, on a graph. They may coexist in some nodes of the graph or, sometimes they may even move on it. Then, in some cases, it is possible to reduce the model to the framework of our work by defining the agents as the nodes in the graph and including the presence or lack of an actor in the prescription of the attributes defining the elements of S as well as the topology of the graph accordingly inα. 6. Final Remarks and Prospectives. An important mark of ABMs is their ability to include arbitrary levels of heterogeneity and stochas- ticity (or uncertainty) into the description of a system of interacting agents. While computer sim- ulations are often suited for making important dynamical trends of these models visible, a rigorous characterization of the different dynamical phases is difficult. In this work we analyze the dynamics of an ABM from a Markovian perspective and derive explicit statements about the possibility of linking a microscopic agent model to the dynamical processes of macroscopic observables that are useful for a precise understanding of the model dynamics. In this way the dynamics of collective variables may be studied, and a description of macro dynamics as emergent properties of micro dynamics, in particularly during transient times, is possible. In our context, the random map representation (RMR) of a Markov process helps to understand the role devoted to the collection of (deterministic) dynamical rules used in the model from one side and of the probability distribution ω governing the sequential choice of the dynamical rule used to update the system at each time step from the other side. The importance of this probability distribution, often neglected, is to encode the design of the social structure of the exchange actions at the time of the analysis. Not only, then, are features of this probability distribution concerned with the social context the model aims to describe, but also they are crucial in predicting the properties of the macro–dynamics. If we decide to remain at a Markovian level, then the partition, or equivalently the collective variables, to be used to build the model may be compatible with the symmetry of the probability distribution ω. In a sense the partition of the configuration space defining the macro–level of the description has to be refined in order to account for an increased level of heterogeneity or a falloff in the symmetry of the probability distribution. It is, however, clear that, in absence of any symmetry, there is no other choice for this partition than to stay at the micro–level and in this sense, no Markovian description of a macro–level, is possible in this case. 24 SVEN BANISCHA,D , RICARDO LIMAB,D AND TANYA ARAU´JOC,D At this point two possible approaches could be explored in the future: first to identify in specific models other natural symmetries inducing a Markovian description of their macro counterpart and to study the evolution of the corresponding collective behavior; and second, to tackle the problem of describing the dynamics of the macro variables in cases where they are not Markovian. For this purpose the cases where ω is not homogeneous (or symmetric) but has special structural properties seem to be a crucial issue for further research. This point must have an important impact in the understanding of descriptive emergence since it is a (the, in ABM context) source of long memory effects in the dynamics of the formation of collective social patterns. Another important prospect concerns the measure of practical emergence or discrepancy, the gap between the macro-structural properties of a social system and internalized rules or intentions of the individual actors. The measure of this gap should lead to more elaborate gauges whose dynamics themselves call for new specific investigation. As pointed out in section 1, under certain circumstances the macro process may undergo dynamical changes in its own structural rules. This fact is referred to as explanatory emergence. It can be understood either as a consequence of some external (to the model) inputs or on the basis of deep accelerations of the micro dynamics that in turn bring about the processes of change at the macro level. In both cases this question opens up to new theoretical as well as very interesting practical developments. In an ABM as presented in section 2, the macro-structural patterns of social relations are encoded in the probability distribution ω, or its generalization when the model allows a simultaneous updating depending on more than two agents. Therefore a dynamics of this structure may be incorporated in the model as a dynamics of the probability distribution, allowing it to be time dependent: ωt. This can be done at different levels. The simplest one occurs when the structural dynamics is assumed to be autonomous, in the form of a master-slave system where the dynamics of the probability distribution is defined independently of the evolution of the process. It is natural to suppose that this dynamics is slow with respect to a fast dynamics of the agent changes. A more sophisticated modeling consists of coupling the individual agent dynamics with the dynamics of the distribution. This corresponds to assuming a feedback of the agent dynamics on the evolution of the structural rules fixing the macro dynamics. In both cases a rigorous treatment of the problem is sufficiently compelling to deserve further research. The formalization of the relations between the micro and the macro levels in the description of the dynamics of Agent Based Models as well as their mathematical characterization is a step towards a mathematical theory of emergence in complex adaptive systems. In this work we showed how a Markov chain approach, in particular the use of the notion of lumpability, provides useful instruments for the analysis of the link from a microscopic ABM to macroscopic observables. Further research is needed to deepen our understanding of this link in a more general setting. 7. Acknowledgments We are grateful to Ann Henshall for a careful reading of the manuscript and to Dima Volchenkov for helpful discussions. Financial support of the German Federal Ministry of Education and Research (BMBF) through the project Linguistic Networks (http://project.linguistic-networks.net) and the Portuguese Foundation for Science and Technology (FCT) through the project PDCT/EGE/60193/2004 is also gratefully acknowledged. References [Alexander et al., 1987] Alexander, J. C., Giesen, B., Mu¨nch, R., and Smelser, N. J., editors (1987). The Micro–Macro Link. University of California press. AGENT BASED MODELS AND OPINION DYNAMICS AS MARKOV CHAINS 25 [Axelrod, 1997] Axelrod, R. (1997). The dissemination of culture: A model with local convergence and global polariza- tion. The Journal of Conflict Resolution, 41(2):203–226. [Barnes, 1954] Barnes, J. A. (1954). Class and Committees in a Norwegian Island Parish. Human Relations, (7):39–58. [Behrends, 2000] Behrends, E. (2000). Introduction to Markov Chains with Special Emphasis on Rapid Mixing. Friedrick Vieweg & Son. [Brodbeck, 1968] Brodbeck, M. (1968). Methodological individualism - definitions and reduction. In Brodbeck, M., editor, Readings in the Philosophy of the Social Sciences, pages 280 – 309. London: Collier-Macmillan. [Castellano et al., 2009] Castellano, C., Fortunato, S., and Loreto, V. (2009). Statistical physics of social dynamics. Reviews of Modern Physics, 81(2):591–646. [Castellano et al., 2000] Castellano, C., Marsili, M., and Vespignani, A. (2000). Nonequilibrium phase transition in a model for social influence. Physical Review Letters, 85(16):3536–3539. [Chazottes and Ugalde, 2003] Chazottes, J.-R. and Ugalde, E. (2003). Projection of Markov measures may be Gibbsian. Journal of Statistical Physics, 111(5/6). [Clifford and Sudbury, 1973] Clifford, P. and Sudbury, A. (1973). A model for spatial conflict. Biometrika, 60(3):581– 588. [Conte and Boor, 1980] Conte, S. D. and Boor, C. W. D. (1980). Elementary Numerical Analysis: An Algorithmic Approach. McGraw-Hill Higher Education, 3rd edition. [Cox, 1989] Cox, J. T. (1989). Coalescing random walks and voter model consensus times on the torus in Zd. The Annals of Probability, 17(4):pp. 1333–1366. [Deffuant et al., 2001] Deffuant, G., Neau, D., Amblard, F., and Weisbuch, G. (2001). Mixing beliefs among interacting agents. Advances in Complex Systems, 3:87–98. [Epstein and Axtell, 1996] Epstein, J. M. and Axtell, R. (1996). Growing artificial societies: social science from the bottom up. The Brookings Institution, Washington, DC, USA. [Frachebourg and Krapivsky, 1996] Frachebourg, L. and Krapivsky, P. L. (1996). Exact results for kinetics of catalytic reactions. Phys. Rev. E, 53(4):R3009–R3012. [Giddens, 1984] Giddens, A. (1984). The Constitution of Society. Outline of the Theory of Structuration. Cambridge. [Giesen, 1987] Giesen, B. (1987). Beyond reductionism: Four models relating micro and macro levels. In Alexander, J. C., Giesen, B., Mu¨nch, R., and Smelser, N. J., editors, The Micro-Macro Link. Cha. 15. [Granovetter, 1973] Granovetter, M. (1973). The strength of weak ties. The American Journal of Sociology, 78(6):1360– 1380. [Grauwin et al., 2010] Grauwin, S., Goffette-Nagot, F., and Jensen, P. (2010). Dynamic models of residential segrega- tion: an analytical solution. GATE Working Paper No. 1017. Available at SSRN: http://ssrn.com/abstract=1646260 [Hegselmann and Krause, 2002] Hegselmann, R. and Krause, U. (2002). Opinion dynamics and bounded confidence: Models, analysis and simulation. Journal of Artificial Societies and Social Simulation, 5(3):1. [Helbing, 1994] Helbing, D. (1994). A mathematical model for the behavior of individuals in a social field. Journal of Mathematical Sociology, 19(3):189–219. [Izquierdo et al., 2009] Izquierdo, L. R., Izquierdo, S. S., Gala´n, J. M., and Santos, J. I. (2009). Techniques to understand computer simulations: Markov chain analysis. Journal of Artificial Societies and Social Simulation, 12(1):6. [Kemeny and Snell, 1976] Kemeny, J. G. and Snell, J. L. (1976). Finite Markov Chains. Springer. [Kimura and Weiss, 1964] Kimura, M. and Weiss, G. H. (1964). The stepping stone model of population structure and the decrease of genetic correlation with distance. Genetics, 49:561–576. [Krapivsky and Redner, 2003] Krapivsky, P. L. and Redner, S. (2003). Dynamics of majority rule in two-state interact- ing spin systems. Phys. Rev. Lett., 90(23):238701. [Levin et al., 2009] Levin, D. A., Peres, Y., and Wilmer, E. L. (2009). Markov chains and mixing times. American Mathematical Society. [Liggett, 1999] Liggett, T. M. (1999). Stochastic Interacting Systems: Contact, Voter and Exclusion Processes, volume 324 of Grundlehren der mathematischen Wissenschaften. Springer. [Moreno, 1934] Moreno, J. L. (1934). Who shall survive?: Foundations of sociometry, group psychotherapy, and socio- drama. Washington, D. C. : Nervous and Mental Disease Publishing Co. [Moreno, 1946] Moreno, J. L. (1946). Sociogram and sociomatrix: a note to the paper by Forsyth and Katz. Sociometry, 9(4):348 – 349. [Parsons, 1954] Parsons, T. (1954). Essays in Social Theory. New York: Free press. [Pollicott and Weiss, 2001] Pollicott, M. and Weiss, H. (2001). The dynamics of Schelling-type segregation models and a nonlinear graph laplacian variational problem. Advances in Applied Mathematics, 27(1):17 – 40. [Schelling, 971a] Schelling, T. (1971a). Dynamic models of segregation. Journal of Mathematical Sociology, 1(2):143– 186. [Schweitzer, 2003] Schweitzer, F. (2003). Meinungsbildung, kommunikation und kooperation aus physikalischer perspek- tive. Physik Journal, 2(5):57–62. 26 SVEN BANISCHA,D , RICARDO LIMAB,D AND TANYA ARAU´JOC,D [Schweitzer and Behera, 2008] Schweitzer, F. and Behera, L. (2008). Nonlinear voter models: The transition from inva- sion to coexistence. The European Physical Journal B - Condensed Matter and Complex Systems, 67(3):301–318. [Seneta, 2006] Seneta, E. (2006). Non-negative Matrices and Markov Chains (Springer Series in Statistics). Springer, 2nd edition. [Slanina and Lavicka, 2003] Slanina, F. and Lavicka, H. (2003). Analytical results for the Sznajd model of opinion formation. The European Physical Journal B - Condensed Matter and Complex Systems, 35(2):279–288. [Sood and Redner, 2005] Sood, V. and Redner, S. (2005). Voter model on heterogeneous graphs. Phys. Rev. Lett., 94(17):178701. [Vazquez and Egu´ıluz, 2008] Vazquez, F. and Egu´ıluz, V. M. (2008). Analytical solution of the voter model on uncor- related networks. New Journal of Physics, 10(6):063011. [Weber, 1978] Weber, M. (1978). Economy and Society. London, University of California Press, 29, Berkley, Los Angeles. Collected translation from different original work, from 1909 to 1920. [Weidlich, 2006] Weidlich, W. (2006). Sociodynamics: A Systemic Approach to Mathematical Modelling in the Social Sciences (Dover Books on Mathematics). Dover Pubn Inc. 